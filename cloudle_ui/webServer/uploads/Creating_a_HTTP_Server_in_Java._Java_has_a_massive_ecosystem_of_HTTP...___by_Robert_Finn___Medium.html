<!doctype html><html lang="en"><head><title data-rh="true">Creating a HTTP Server in Java. Java has a massive ecosystem of HTTP… | by Robert Finn | Medium</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2024-05-19T17:17:13.756Z"/><meta data-rh="true" name="title" content="Creating a HTTP Server in Java. Java has a massive ecosystem of HTTP… | by Robert Finn | Medium"/><meta data-rh="true" property="og:title" content="Creating a HTTP Server in Java"/><meta data-rh="true" property="al:android:url" content="medium://p/9b6af7f9b3cd"/><meta data-rh="true" property="al:ios:url" content="medium://p/9b6af7f9b3cd"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="Spring is a popular framework that lets you program against it’s API and easily configure the underlying servlet container used ( Tomcat, Jetty, Undertow ). Other frameworks such as Vertx and Play…"/><meta data-rh="true" property="og:description" content="Java has a massive ecosystem of HTTP servers and frameworks which sit on top."/><meta data-rh="true" property="og:url" content="https://rjlfinn.medium.com/creating-a-http-server-in-java-9b6af7f9b3cd"/><meta data-rh="true" property="al:web:url" content="https://rjlfinn.medium.com/creating-a-http-server-in-java-9b6af7f9b3cd"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/resize:fit:1200/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg"/><meta data-rh="true" property="article:author" content="https://rjlfinn.medium.com"/><meta data-rh="true" name="author" content="Robert Finn"/><meta data-rh="true" name="robots" content="index,noarchive,follow,max-image-preview:large"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" property="twitter:title" content="Creating a HTTP Server in Java"/><meta data-rh="true" name="twitter:site" content="@Medium"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/9b6af7f9b3cd"/><meta data-rh="true" property="twitter:description" content="Java has a massive ecosystem of HTTP servers and frameworks which sit on top."/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/resize:fit:1200/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:label1" content="Reading time"/><meta data-rh="true" name="twitter:data1" content="11 min read"/><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/5d8de952517e8160e40ef9841c781cdc14a5db313057fa3c3de41c6f5b494b19"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:304:304/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:240:240/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:152:152/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:120:120/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="mask-icon" href="https://miro.medium.com/v2/resize:fill:1000:1000/7*GAOKVe--MXbEJmV9230oOQ.png" color="#171717"/><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" rel="author" href="https://rjlfinn.medium.com"/><link data-rh="true" rel="canonical" href="https://rjlfinn.medium.com/creating-a-http-server-in-java-9b6af7f9b3cd"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/9b6af7f9b3cd"/><script data-rh="true" type="application/ld+json">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:1200\u002F1*kkD3XGh8Tdb71HC_HqlxOA.jpeg"],"url":"https:\u002F\u002Frjlfinn.medium.com\u002Fcreating-a-http-server-in-java-9b6af7f9b3cd","dateCreated":"2023-01-15T18:10:43.783Z","datePublished":"2023-01-15T18:10:43.783Z","dateModified":"2024-05-19T17:17:13.756Z","headline":"Creating a HTTP Server in Java - Robert Finn - Medium","name":"Creating a HTTP Server in Java - Robert Finn - Medium","description":"Spring is a popular framework that lets you program against it’s API and easily configure the underlying servlet container used ( Tomcat, Jetty, Undertow ). Other frameworks such as Vertx and Play…","identifier":"9b6af7f9b3cd","author":{"@type":"Person","name":"Robert Finn","url":"https:\u002F\u002Frjlfinn.medium.com"},"creator":["Robert Finn"],"publisher":{"@type":"Organization","name":"Medium","url":"https:\u002F\u002Frjlfinn.medium.com\u002F","logo":{"@type":"ImageObject","width":272,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:544\u002F7*V1_7XP4snlmqrc_0Njontw.png"}},"mainEntityOfPage":"https:\u002F\u002Frjlfinn.medium.com\u002Fcreating-a-http-server-in-java-9b6af7f9b3cd"}</script><style type="text/css" data-fela-rehydration="552" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs {background: #fff;color: black;
}/* Gray DOCTYPE selectors like WebKit */
.xml .hljs-meta {color: #c0c0c0;
}.hljs-comment,
.hljs-quote {color: #007400;
}.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {color: #aa0d91;
}.hljs-variable,
.hljs-template-variable {color: #3F6E74;
}.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {color: #c41a16;
}.hljs-regexp,
.hljs-link {color: #0E0EFF;
}.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {color: #1c00cf;
}.hljs-section,
.hljs-meta {color: #643820;
}.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {color: #5c2699;
}.hljs-attr {color: #836C28;
}.hljs-subst {color: #000;
}.hljs-formula {background-color: #eee;font-style: italic;
}.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd;
}.hljs-selector-id,
.hljs-selector-class {color: #9b703f;
}.hljs-doctag,
.hljs-strong {font-weight: bold;
}.hljs-emphasis {font-style: italic;
}
</style><style type="text/css" data-fela-rehydration="552" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-webkit-keyframes k2{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}@-moz-keyframes k2{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}@keyframes k2{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}</style><style type="text/css" data-fela-rehydration="552" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{display:block}.m{position:sticky}.n{top:0}.o{z-index:500}.p{padding:0 24px}.q{align-items:center}.r{border-bottom:solid 1px #F2F2F2}.y{height:41px}.z{line-height:20px}.ab{display:flex}.ac{height:57px}.ae{flex:1 0 auto}.af{color:inherit}.ag{fill:inherit}.ah{font-size:inherit}.ai{border:inherit}.aj{font-family:inherit}.ak{letter-spacing:inherit}.al{font-weight:inherit}.am{padding:0}.an{margin:0}.ao{cursor:pointer}.ap:disabled{cursor:not-allowed}.aq:disabled{color:#6B6B6B}.ar:disabled{fill:#6B6B6B}.au{width:auto}.av path{fill:#242424}.aw{height:25px}.ax{margin-left:16px}.ay{border:none}.az{border-radius:20px}.ba{width:240px}.bb{background:#F9F9F9}.bc path{fill:#6B6B6B}.be{outline:none}.bf{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.bg{font-size:14px}.bh{width:100%}.bi{padding:10px 20px 10px 0}.bj{background-color:transparent}.bk{color:#242424}.bl::placeholder{color:#6B6B6B}.bm{display:inline-block}.bn{margin-left:12px}.bo{margin-right:12px}.bp{border-radius:4px}.bq{margin-left:24px}.br{height:24px}.bx{background-color:#F9F9F9}.by{border-radius:50%}.bz{height:32px}.ca{width:32px}.cb{justify-content:center}.ch{max-width:680px}.ci{min-width:0}.cj{animation:k1 1.2s ease-in-out infinite}.ck{height:100vh}.cl{margin-bottom:16px}.cm{margin-top:48px}.cn{align-items:flex-start}.co{flex-direction:column}.cp{justify-content:space-between}.cq{margin-bottom:24px}.cw{width:80%}.cx{background-color:#F2F2F2}.dd{height:44px}.de{width:44px}.df{margin:auto 0}.dg{margin-bottom:4px}.dh{height:16px}.di{width:120px}.dj{width:80px}.dp{margin-bottom:8px}.dq{width:96%}.dr{width:98%}.ds{width:81%}.dw{margin-left:8px}.dx{color:#6B6B6B}.dy{font-size:13px}.dz{height:100%}.ec{margin-right:32px}.ed{position:relative}.ee{fill:#6B6B6B}.eh{background:transparent}.ei svg{margin-left:4px}.ej svg{fill:#6B6B6B}.el{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.05)}.em{position:absolute}.ep{box-sizing:border-box}.ev{margin:0 24px}.ez{background:rgba(255, 255, 255, 1)}.fa{border:1px solid #F2F2F2}.fb{box-shadow:0 1px 4px #F2F2F2}.fc{max-height:100vh}.fd{overflow-y:auto}.fe{left:0}.ff{top:calc(100vh + 100px)}.fg{bottom:calc(100vh + 100px)}.fh{width:10px}.fi{pointer-events:none}.fj{word-break:break-word}.fk{word-wrap:break-word}.fl:after{display:block}.fm:after{content:""}.fn:after{clear:both}.fo{line-height:1.23}.fp{letter-spacing:0}.fq{font-style:normal}.fr{font-weight:700}.gw{align-items:baseline}.gx{width:48px}.gy{height:48px}.gz{border:2px solid rgba(255, 255, 255, 1)}.ha{z-index:0}.hb{box-shadow:none}.hc{border:1px solid rgba(0, 0, 0, 0.05)}.hd{margin-bottom:2px}.he{flex-wrap:nowrap}.hf{font-size:16px}.hg{line-height:24px}.hi{margin:0 8px}.hj{display:inline}.hk{color:#1A8917}.hl{fill:#1A8917}.hm:disabled{opacity:0.3}.hp{flex:0 0 auto}.hs{flex-wrap:wrap}.ht{padding-left:8px}.hu{padding-right:8px}.iv> *{flex-shrink:0}.iw{overflow-x:scroll}.ix::-webkit-scrollbar{display:none}.iy{scrollbar-width:none}.iz{-ms-overflow-style:none}.ja{width:74px}.jb{flex-direction:row}.jc{z-index:2}.jd{margin-right:4px}.jg{-webkit-user-select:none}.jh{border:0}.ji{cursor:progress}.jj{fill:rgba(117, 117, 117, 1)}.jm{opacity:0.25}.jn{outline:0}.jo{user-select:none}.jp> svg{pointer-events:none}.jy{margin-left:4px}.jz{margin-top:0px}.ka{opacity:1}.kb{padding:4px 0}.ke{width:16px}.kf{padding:8px 2px}.ki svg path{fill:#6B6B6B}.kj{display:inline-flex}.kp{max-width:100%}.kq svg{color:#6B6B6B}.lh{margin-left:auto}.li{margin-right:auto}.lj{max-width:5484px}.lp{clear:both}.lr{cursor:zoom-in}.ls{z-index:auto}.lu{height:auto}.lv{margin-top:10px}.lw{text-align:center}.lx{max-width:728px}.ma{text-decoration:underline}.mb{line-height:1.58}.mc{letter-spacing:-0.004em}.md{font-family:source-serif-pro, Georgia, Cambria, "Times New Roman", Times, serif}.my{margin-bottom:-0.46em}.mz{list-style-type:disc}.na{margin-left:30px}.nb{padding-left:0px}.nh{margin-top:32px}.ni{margin-bottom:14px}.nj{padding-top:24px}.nk{padding-bottom:10px}.nl{background-color:#000000}.nm{height:3px}.nn{width:3px}.no{margin-right:20px}.np{line-height:1.18}.nq{letter-spacing:-0.022em}.nr{font-weight:600}.oj{margin-bottom:-0.31em}.ou{overflow-x:auto}.ov{font-family:source-code-pro, Menlo, Monaco, "Courier New", Courier, monospace}.ow{padding:32px}.ox{border:1px solid #E5E5E5}.oy{line-height:1.4}.oz{margin-top:-0.2em}.pa{margin-bottom:-0.2em}.pb{white-space:pre}.pc{min-width:fit-content}.pd{max-width:1480px}.pe{max-width:561px}.pf{padding:2px 4px}.pg{font-size:75%}.ph> strong{font-family:inherit}.pi{max-width:2038px}.pj{list-style-type:decimal}.pk{margin-top:16px}.pl{margin-bottom:26px}.pm{margin-top:6px}.pn{margin-top:8px}.po{margin-right:8px}.pp{padding:8px 16px}.pq{border-radius:100px}.pr{transition:background 300ms ease}.pt{white-space:nowrap}.pu{border-top:none}.pv{margin-bottom:50px}.pw{height:52px}.px{max-height:52px}.py{box-sizing:content-box}.pz{position:static}.qa{z-index:1}.qc{max-width:155px}.qi{margin-bottom:64px}.qx{height:64px}.qy{width:64px}.qz{align-self:flex-end}.ra{color:#F2F2F2}.rb{fill:#F2F2F2}.rc{background:#F2F2F2}.rd{border-color:#F2F2F2}.rj:disabled{cursor:inherit !important}.rk:disabled{opacity:0.1}.rl:disabled:hover{background:rgba(25, 25, 25, 1)}.rm:disabled:hover{border-color:rgba(25, 25, 25, 1)}.rn{border-radius:99em}.ro{border-width:1px}.rp{border-style:solid}.rq{text-decoration:none}.rr{flex:1 1 auto}.rx{padding-right:4px}.ry{font-weight:500}.sf{white-space:pre-wrap}.sl{height:0px}.sz{gap:18px}.ta{fill:rgba(61, 61, 61, 1)}.tc{padding-bottom:6px}.td{border-bottom:1px solid #F2F2F2}.tj{fill:#242424}.tk{background:0}.tl{border-color:#242424}.tp:disabled:hover{color:#242424}.tq:disabled:hover{fill:#242424}.tr:disabled:hover{border-color:#242424}.uc{border-bottom:solid 1px #E5E5E5}.ud{margin-top:72px}.ue{padding:24px 0}.uf{margin-bottom:0px}.ug{margin-right:16px}.as:hover:not(:disabled){color:rgba(25, 25, 25, 1)}.at:hover:not(:disabled){fill:rgba(25, 25, 25, 1)}.ef:hover{color:#242424}.eg:hover{fill:#242424}.ek:hover svg{fill:#242424}.eo:hover{background-color:rgba(0, 0, 0, 0.1)}.hh:hover{text-decoration:underline}.hn:hover:not(:disabled){color:#156D12}.ho:hover:not(:disabled){fill:#156D12}.jl:hover{fill:rgba(117, 117, 117, 1)}.kc:hover{fill:#000000}.kd:hover p{color:#000000}.kg:hover:not(:disabled) svg path{fill:#000000}.kr:hover svg{color:#000000}.ps:hover{background-color:#F2F2F2}.qw:hover{background-color:none}.re:hover{background:#F2F2F2}.rf:hover{border-color:#F2F2F2}.rg:hover{cursor:wait}.rh:hover{color:#F2F2F2}.ri:hover{fill:#F2F2F2}.tb:hover{fill:rgba(25, 25, 25, 1)}.tm:hover{color:#000000}.tn:hover{border-color:#242424}.to:hover{cursor:pointer}.bd:focus-within path{fill:#242424}.jk:focus{fill:rgba(117, 117, 117, 1)}.kh:focus svg path{fill:#000000}.ks:focus svg{color:#000000}.lt:focus{transform:scale(1.01)}.jq:active{border-style:none}</style><style type="text/css" data-fela-rehydration="552" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.bw{width:64px}.cg{margin:0 64px}.cv{height:48px}.dc{margin-bottom:52px}.do{margin-bottom:48px}.eb{display:flex}.eu{margin-bottom:50px}.ey{max-width:680px}.gm{font-size:42px}.gn{margin-top:1.19em}.go{margin-bottom:32px}.gp{line-height:52px}.gq{letter-spacing:-0.011em}.gv{align-items:center}.ih{border-top:solid 1px #F2F2F2}.ii{border-bottom:solid 1px #F2F2F2}.ij{margin:32px 0 0}.ik{padding:3px 8px}.it> *{margin-right:24px}.iu> :last-child{margin-right:0}.jx{margin-top:0px}.ko{margin:0}.lo{margin-top:40px}.mu{font-size:20px}.mv{margin-top:2.14em}.mw{line-height:32px}.mx{letter-spacing:-0.003em}.ng{margin-top:1.14em}.og{margin-top:1.72em}.oh{line-height:24px}.oi{letter-spacing:0}.oo{margin-top:0.94em}.ot{margin-top:56px}.qh{display:inline-block}.qj{flex-direction:row}.qm{margin-bottom:0}.qn{margin-right:20px}.rs{max-width:500px}.sk{margin-bottom:88px}.sw{font-size:24px}.sx{line-height:30px}.sy{letter-spacing:-0.016em}.ti{margin:40px 0 16px}.tw{width:min-width}.ub{padding-top:72px}</style><style type="text/css" data-fela-rehydration="552" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.jw{margin-top:0px}.ly{margin-left:auto}.lz{text-align:center}.qg{display:inline-block}</style><style type="text/css" data-fela-rehydration="552" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.jv{margin-top:0px}.qf{display:inline-block}</style><style type="text/css" data-fela-rehydration="552" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.jt{margin-top:0px}.ju{margin-right:0px}.qe{display:inline-block}</style><style type="text/css" data-fela-rehydration="552" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.s{display:flex}.t{justify-content:space-between}.bs{width:24px}.cc{margin:0 24px}.cr{height:40px}.cy{margin-bottom:44px}.dk{margin-bottom:32px}.dt{justify-content:center}.eq{margin-bottom:2px}.fs{font-size:32px}.ft{margin-top:1.01em}.fu{margin-bottom:24px}.fv{line-height:38px}.fw{letter-spacing:-0.014em}.gr{align-items:flex-start}.hq{flex-direction:column}.hv{margin:24px -24px 0}.hw{padding:0}.il> *{margin-right:8px}.im> :last-child{margin-right:24px}.je{margin-left:0px}.jr{margin-top:0px}.js{margin-right:0px}.kk{margin:0}.kt{border:1px solid #F2F2F2}.ku{border-radius:99em}.kv{padding:0px 16px 0px 12px}.kw{height:38px}.kx{align-items:center}.kz svg{margin-right:8px}.lk{margin-top:32px}.me{font-size:18px}.mf{margin-top:1.56em}.mg{line-height:28px}.mh{letter-spacing:-0.003em}.nc{margin-top:1.34em}.ns{font-size:16px}.nt{margin-top:1.23em}.nu{line-height:20px}.nv{letter-spacing:0}.ok{margin-top:0.67em}.op{margin-top:40px}.qd{display:inline-block}.qu{margin-bottom:20px}.qv{margin-right:0}.rw{max-width:100%}.rz{font-size:24px}.sa{line-height:30px}.sb{letter-spacing:-0.016em}.sg{margin-bottom:64px}.sm{font-size:20px}.sn{line-height:24px}.te{margin:32px 0 16px}.ts{width:100%}.tx{padding-top:48px}.ky:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="552" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.bv{width:64px}.cf{margin:0 64px}.cu{height:48px}.db{margin-bottom:52px}.dn{margin-bottom:48px}.ea{display:flex}.et{margin-bottom:50px}.ex{max-width:680px}.gh{font-size:42px}.gi{margin-top:1.19em}.gj{margin-bottom:32px}.gk{line-height:52px}.gl{letter-spacing:-0.011em}.gu{align-items:center}.id{border-top:solid 1px #F2F2F2}.ie{border-bottom:solid 1px #F2F2F2}.if{margin:32px 0 0}.ig{padding:3px 8px}.ir> *{margin-right:24px}.is> :last-child{margin-right:0}.kn{margin:0}.ln{margin-top:40px}.mq{font-size:20px}.mr{margin-top:2.14em}.ms{line-height:32px}.mt{letter-spacing:-0.003em}.nf{margin-top:1.14em}.od{margin-top:1.72em}.oe{line-height:24px}.of{letter-spacing:0}.on{margin-top:0.94em}.os{margin-top:56px}.qk{flex-direction:row}.qo{margin-bottom:0}.qp{margin-right:20px}.rt{max-width:500px}.sj{margin-bottom:88px}.st{font-size:24px}.su{line-height:30px}.sv{letter-spacing:-0.016em}.th{margin:40px 0 16px}.tv{width:min-width}.ua{padding-top:72px}</style><style type="text/css" data-fela-rehydration="552" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.w{display:flex}.x{justify-content:space-between}.bu{width:64px}.ce{margin:0 48px}.ct{height:48px}.da{margin-bottom:52px}.dm{margin-bottom:48px}.dv{justify-content:center}.es{margin-bottom:50px}.ew{max-width:680px}.gc{font-size:42px}.gd{margin-top:1.19em}.ge{margin-bottom:32px}.gf{line-height:52px}.gg{letter-spacing:-0.011em}.gt{align-items:center}.hz{border-top:solid 1px #F2F2F2}.ia{border-bottom:solid 1px #F2F2F2}.ib{margin:32px 0 0}.ic{padding:3px 8px}.ip> *{margin-right:24px}.iq> :last-child{margin-right:0}.km{margin:0}.lm{margin-top:40px}.mm{font-size:20px}.mn{margin-top:2.14em}.mo{line-height:32px}.mp{letter-spacing:-0.003em}.ne{margin-top:1.14em}.oa{margin-top:1.72em}.ob{line-height:24px}.oc{letter-spacing:0}.om{margin-top:0.94em}.or{margin-top:56px}.ql{flex-direction:row}.qq{margin-bottom:0}.qr{margin-right:20px}.ru{max-width:500px}.si{margin-bottom:88px}.sq{font-size:24px}.sr{line-height:30px}.ss{letter-spacing:-0.016em}.tg{margin:40px 0 16px}.tu{width:min-width}.tz{padding-top:72px}</style><style type="text/css" data-fela-rehydration="552" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.u{display:flex}.v{justify-content:space-between}.bt{width:24px}.cd{margin:0 24px}.cs{height:40px}.cz{margin-bottom:44px}.dl{margin-bottom:32px}.du{justify-content:center}.er{margin-bottom:2px}.fx{font-size:32px}.fy{margin-top:1.01em}.fz{margin-bottom:24px}.ga{line-height:38px}.gb{letter-spacing:-0.014em}.gs{align-items:flex-start}.hr{flex-direction:column}.hx{margin:24px 0 0}.hy{padding:0}.in> *{margin-right:8px}.io> :last-child{margin-right:8px}.jf{margin-left:0px}.kl{margin:0}.la{border:1px solid #F2F2F2}.lb{border-radius:99em}.lc{padding:0px 16px 0px 12px}.ld{height:38px}.le{align-items:center}.lg svg{margin-right:8px}.ll{margin-top:32px}.mi{font-size:18px}.mj{margin-top:1.56em}.mk{line-height:28px}.ml{letter-spacing:-0.003em}.nd{margin-top:1.34em}.nw{font-size:16px}.nx{margin-top:1.23em}.ny{line-height:20px}.nz{letter-spacing:0}.ol{margin-top:0.67em}.oq{margin-top:40px}.qs{margin-bottom:20px}.qt{margin-right:0}.rv{max-width:100%}.sc{font-size:24px}.sd{line-height:30px}.se{letter-spacing:-0.016em}.sh{margin-bottom:64px}.so{font-size:20px}.sp{line-height:24px}.tf{margin:32px 0 16px}.tt{width:100%}.ty{padding-top:48px}.lf:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="552" data-fela-type="RULE" media="print">.qb{display:none}</style><style type="text/css" data-fela-rehydration="552" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.lq{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}</style></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><div class="l c"><div class="l m n o c"><div class="am q r s dt u du w dv i d y z"><a class="dx ag dy bf ak b am an ao ap aq ar as at s u w i d q dz z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9b6af7f9b3cd&amp;%7Efeature=LiOpenInAppButton&amp;%7Echannel=ShowPostUnderUser&amp;source=---top_nav_layout_nav----------------------------------" rel="noopener follow">Open in app<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10" class="dw"><path fill="currentColor" d="M.985 8.485a.375.375 0 1 0 .53.53zM8.75 1.25h.375A.375.375 0 0 0 8.75.875zM8.375 6.5a.375.375 0 1 0 .75 0zM3.5.875a.375.375 0 1 0 0 .75zm-1.985 8.14 7.5-7.5-.53-.53-7.5 7.5zm6.86-7.765V6.5h.75V1.25zM3.5 1.625h5.25v-.75H3.5z"></path></svg></a></div><div class="p q r ab ac"><div class="ab q ae"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab" aria-label="Homepage" data-testid="headerMediumLogo" href="https://medium.com/?source=---top_nav_layout_nav----------------------------------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="719" height="160" fill="none" viewBox="0 0 719 160" class="au av aw"><path fill="#242424" d="m174.104 9.734.215-.047V8.02H130.39L89.6 103.89 48.81 8.021H1.472v1.666l.212.047c8.018 1.81 12.09 4.509 12.09 14.242V137.93c0 9.734-4.087 12.433-12.106 14.243l-.212.047v1.671h32.118v-1.665l-.213-.048c-8.018-1.809-12.089-4.509-12.089-14.242V30.586l52.399 123.305h2.972l53.925-126.743V140.75c-.687 7.688-4.721 10.062-11.982 11.701l-.215.05v1.652h55.948v-1.652l-.215-.05c-7.269-1.639-11.4-4.013-12.087-11.701l-.037-116.774h.037c0-9.733 4.071-12.432 12.087-14.242m25.555 75.488c.915-20.474 8.268-35.252 20.606-35.507 3.806.063 6.998 1.312 9.479 3.714 5.272 5.118 7.751 15.812 7.368 31.793zm-.553 5.77h65.573v-.275c-.186-15.656-4.721-27.834-13.466-36.196-7.559-7.227-18.751-11.203-30.507-11.203h-.263c-6.101 0-13.584 1.48-18.909 4.16-6.061 2.807-11.407 7.003-15.855 12.511-7.161 8.874-11.499 20.866-12.554 34.343q-.05.606-.092 1.212a50 50 0 0 0-.065 1.151 85.807 85.807 0 0 0-.094 5.689c.71 30.524 17.198 54.917 46.483 54.917 25.705 0 40.675-18.791 44.407-44.013l-1.886-.664c-6.557 13.556-18.334 21.771-31.738 20.769-18.297-1.369-32.314-19.922-31.042-42.395m139.722 41.359c-2.151 5.101-6.639 7.908-12.653 7.908s-11.513-4.129-15.418-11.63c-4.197-8.053-6.405-19.436-6.405-32.92 0-28.067 8.729-46.22 22.24-46.22 5.657 0 10.111 2.807 12.236 7.704zm43.499 20.008c-8.019-1.897-12.089-4.722-12.089-14.951V1.309l-48.716 14.353v1.757l.299-.024c6.72-.543 11.278.386 13.925 2.83 2.072 1.915 3.082 4.853 3.082 8.987v18.66c-4.803-3.067-10.516-4.56-17.448-4.56-14.059 0-26.909 5.92-36.176 16.672-9.66 11.205-14.767 26.518-14.767 44.278-.003 31.72 15.612 53.039 38.851 53.039 13.595 0 24.533-7.449 29.54-20.013v16.865h43.711v-1.746zM424.1 19.819c0-9.904-7.468-17.374-17.375-17.374-9.859 0-17.573 7.632-17.573 17.374s7.721 17.374 17.573 17.374c9.907 0 17.375-7.47 17.375-17.374m11.499 132.546c-8.019-1.897-12.089-4.722-12.089-14.951h-.035V43.635l-43.714 12.551v1.705l.263.024c9.458.842 12.047 4.1 12.047 15.152v81.086h43.751v-1.746zm112.013 0c-8.018-1.897-12.089-4.722-12.089-14.951V43.635l-41.621 12.137v1.71l.246.026c7.733.813 9.967 4.257 9.967 15.36v59.279c-2.578 5.102-7.415 8.131-13.274 8.336-9.503 0-14.736-6.419-14.736-18.073V43.638l-43.714 12.55v1.703l.262.024c9.459.84 12.05 4.097 12.05 15.152v50.17a56.3 56.3 0 0 0 .91 10.444l.787 3.423c3.701 13.262 13.398 20.197 28.59 20.197 12.868 0 24.147-7.966 29.115-20.43v17.311h43.714v-1.747zm169.818 1.788v-1.749l-.213-.05c-8.7-2.006-12.089-5.789-12.089-13.49v-63.79c0-19.89-11.171-31.761-29.883-31.761-13.64 0-25.141 7.882-29.569 20.16-3.517-13.01-13.639-20.16-28.606-20.16-13.146 0-23.449 6.938-27.869 18.657V43.643L545.487 55.68v1.715l.263.024c9.345.829 12.047 4.181 12.047 14.95v81.784h40.787v-1.746l-.215-.053c-6.941-1.631-9.181-4.606-9.181-12.239V66.998c1.836-4.289 5.537-9.37 12.853-9.37 9.086 0 13.692 6.296 13.692 18.697v77.828h40.797v-1.746l-.215-.053c-6.94-1.631-9.18-4.606-9.18-12.239V75.066a42 42 0 0 0-.578-7.26c1.947-4.661 5.86-10.177 13.475-10.177 9.214 0 13.691 6.114 13.691 18.696v77.828z"></path></svg></a><div class="ax h"><div class="ab ay az ba bb q bc bd"><div class="bm" aria-hidden="false" aria-describedby="searchResults" aria-labelledby="searchResults"></div><div class="bn bo ab"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div><input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="ay be bf bg z bh bi bj bk bl" placeholder="Search" value=""/></div></div></div><div class="h k w ea eb"><div class="ec ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" href="https://medium.com/new-story?source=---top_nav_layout_nav----------------------------------" rel="noopener follow"><div class="bf b bg z dx ed ee ab q ef eg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Write"><path fill="currentColor" d="M14 4a.5.5 0 0 0 0-1zm7 6a.5.5 0 0 0-1 0zm-7-7H4v1h10zM3 4v16h1V4zm1 17h16v-1H4zm17-1V10h-1v10zm-1 1a1 1 0 0 0 1-1h-1zM3 20a1 1 0 0 0 1 1v-1zM4 3a1 1 0 0 0-1 1h1z"></path><path stroke="currentColor" d="m17.5 4.5-8.458 8.458a.25.25 0 0 0-.06.098l-.824 2.47a.25.25 0 0 0 .316.316l2.47-.823a.25.25 0 0 0 .098-.06L19.5 6.5m-2-2 2.323-2.323a.25.25 0 0 1 .354 0l1.646 1.646a.25.25 0 0 1 0 .354L19.5 6.5m-2-2 2 2"></path></svg><div class="dw l">Write</div></div></a></div></div><div class="k j i d"><div class="ec ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" href="https://medium.com/search?source=---top_nav_layout_nav----------------------------------" rel="noopener follow"><div class="bf b bg z dx ed ee ab q ef eg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Search"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div></a></div></div><div class="ec ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerNotificationButton" href="https://medium.com/me/notifications?source=---top_nav_layout_nav----------------------------------" rel="noopener follow"><div class="bf b bg z dx ed ee ab q ef eg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Notifications"><path stroke="currentColor" stroke-linecap="round" d="M15 18.5a3 3 0 1 1-6 0"></path><path stroke="currentColor" stroke-linejoin="round" d="M5.5 10.532V9a6.5 6.5 0 0 1 13 0v1.532c0 1.42.564 2.782 1.568 3.786l.032.032c.256.256.4.604.4.966v2.934a.25.25 0 0 1-.25.25H3.75a.25.25 0 0 1-.25-.25v-2.934c0-.363.144-.71.4-.966l.032-.032A5.35 5.35 0 0 0 5.5 10.532Z"></path></svg></div></a></div><div class="l" aria-hidden="false"><button class="ay eh am ab q ao ei ej ek" aria-label="user options menu" data-testid="headerUserIcon"><div class="l ed"><div class="l ed"><img alt="Eniola Olumeyan" class="l ep by bz ca cx" src="https://miro.medium.com/v2/resize:fill:64:64/0*nxbIxj7AzyX6gnF5" width="32" height="32" loading="lazy"/><div class="el by l bz ca em n ay eo"></div></div></div></button></div></div></div><div class="l"><div class="eq er es et eu l"><div class="ab cb"><div class="ci bh ev ew ex ey"></div></div><article><div class="l"><div class="l"><span class="l"></span><section><div><div class="em fe ff fg fh fi"></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div><h1 id="a5ea" class="pw-post-title fo fp fq bf fr fs ft fu fv fw fx fy fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go gp gq bk" data-testid="storyTitle">Creating a HTTP Server in Java</h1><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="gr gs gt gu gv ab"><div><div class="ab gw"><div><div class="bm" aria-hidden="false"><a rel="noopener follow" href="/?source=post_page---byline--9b6af7f9b3cd--------------------------------"><div class="l gx gy by gz ha"><div class="l ed"><img alt="Robert Finn" class="l ep by dd de cx" src="https://miro.medium.com/v2/resize:fill:88:88/1*YwQJq47rTxkj17YOWSTnEg.jpeg" width="44" height="44" loading="lazy" data-testid="authorPhoto"/><div class="hb by l dd de em n hc eo"></div></div></div></a></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hd ab q"><div class="ab q he"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hf hg bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hh" data-testid="authorName" rel="noopener follow" href="/?source=post_page---byline--9b6af7f9b3cd--------------------------------">Robert Finn</a></p></div></div></div><span class="hi hj" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hf hg dx"><button class="hk hl ah ai aj ak al am an ao ap aq ar hm hn ho" disabled="">Follow</button></p></div></div></span></div></div><div class="l hp"><span class="bf b bg z dx"><div class="ab cn hq hr hs"><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">11 min read</span><div class="ht hu l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Jan 15, 2023</span></div></span></div></span></div></div></div><div class="ab cp hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik"><div class="h k w ea eb q"><div class="ja l"><div class="ab q jb jc"><div class="pw-multi-vote-icon ed jd je jf jg"><div class=""><div class="jh ji jj jk jl jm jn am jo jp jq jg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"></path></svg></div></div></div><div class="pw-multi-vote-count l jr js jt ju jv jw jx"><p class="bf b dy z dx"><span class="ji">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao jh ka kb ab q ee kc kd" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="jz"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bf b dy z dx"><span class="pw-responses-count jy jz">3</span></p></button></div></div></div><div class="ab q il im in io ip iq ir is it iu iv iw ix iy iz"><div class="ke k j i d"></div><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al kf an ao ap hm kg kh ki" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"></path></svg></button></div></div></div><div class="ep kj cn"><div class="l ae"><div class="ab cb"><div class="kk kl km kn ko kp ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al kf an ao ap hm kq kr kd ks kt ku kv kw s kx ky kz la lb lc ld u le lf lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al kf an ao ap hm kq kr kd ks kt ku kv kw s kx ky kz la lb lc ld u le lf lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al kf an ao ap hm kq kr kd ks kt ku kv kw s kx ky kz la lb lc ld u le lf lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="lk ll lm ln lo lp lh li paragraph-image"><div role="button" tabindex="0" class="lq lr ed ls bh lt"><div class="lh li lj"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 640w, https://miro.medium.com/v2/resize:fit:720/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 720w, https://miro.medium.com/v2/resize:fit:750/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 750w, https://miro.medium.com/v2/resize:fit:786/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 786w, https://miro.medium.com/v2/resize:fit:828/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 828w, https://miro.medium.com/v2/resize:fit:1100/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 1100w, https://miro.medium.com/v2/resize:fit:1400/1*kkD3XGh8Tdb71HC_HqlxOA.jpeg 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh kp lu c" width="700" height="467" loading="eager" role="presentation"/></picture></div></div><figcaption class="lv lw lx lh li ly lz bf b bg z dx">Photo by <a class="af ma" href="https://unsplash.com/es/@ngtghaivan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Nguyen Tong Hai Van</a> on <a class="af ma" href="https://unsplash.com/photos/pkj935eY62A?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3170" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Java has a massive ecosystem of HTTP servers and frameworks which sit on top.</p><p id="126d" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Spring is a popular framework that lets you program against it’s API and easily configure the underlying servlet container used ( Tomcat, Jetty, Undertow ).</p><p id="39f2" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Other frameworks such as Vertx and Play! are built on top of Netty — a low level asynchronous event-driven networking framework.</p><p id="3c24" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">There is also the Java EE landscape which includes the likes of the JBoss, Wildfly and Weblogic application servers.</p><p id="efae" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">When you build a RESTFul service with one of these frameworks you work with the API and don’t think too much about what is going on under the hood.</p><p id="2572" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">In this blog post we’ll explore how you could go about building a functional API on top of a basic HTTP server by simply using Sockets in Java.</p><p id="49cd" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Specifically we’ll:</p><ul class=""><li id="1d0f" class="mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bk">use the Sockets API to handle HTTP requests</li><li id="f014" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my mz na nb bk">implement a very basic example of decoding a HTTP GET Request</li><li id="db7e" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my mz na nb bk">expose a functional API to allow an end user to define routes and embed the server in their application</li></ul><p id="6b0c" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Hopefully this will help you develop a better understanding of what could be going on behind the scenes.</p><p id="4f76" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The goal here is not to implement the full specification of a HTTP server with a fully fledged API on top — I’m not even sure the Socket API is low level enough to implement the full spec, e.g. we’ll just look at a GET request as a learning exercise.</p></div></div></div><div class="ab cb nh ni nj nk" role="separator"><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn"></span></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h2 id="304f" class="np nq fq bf nr ns nt nu nv nw nx ny nz mm oa ob oc mq od oe of mu og oh oi oj bk">The API produced:</h2><p id="6bac" class="pw-post-body-paragraph mb mc fq md b me ok mg mh mi ol mk ml mm om mo mp mq on ms mt mu oo mw mx my fj bk">If we have a Java Gradle application with a build.gradle.kts file we can simply include a dependency on the new server project we’re going to create called ‘functional-server-library’.</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="35ff" class="oy nq fq ov b bg oz pa l pb pc">implementation(project(&quot;:functional-server-library&quot;))</span></pre><p id="6655" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Our main application can then use this library as it will expose a Server class.</p><p id="6d28" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The server class will:</p><ul class=""><li id="982a" class="mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bk">take in the port number it should listen for incoming requests on</li><li id="a196" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my mz na nb bk">allows routes to be added using the addRoute method</li><li id="b14c" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my mz na nb bk">start listening for requests when the start method is called</li></ul><p id="2684" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Therefore the end app will look something like:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="3f3b" class="oy nq fq ov b bg oz pa l pb pc">public class App {<br/>    public static void main(String[] args) throws IOException {<br/>        Server myServer = new Server(8080);<br/>        myServer.addRoute(GET, &quot;/testOne&quot;,<br/>                (req) -&gt; new HttpResponse.Builder()<br/>                        .setStatusCode(200)<br/>                        .addHeader(&quot;Content-Type&quot;, &quot;text/html&quot;)<br/>                        .setEntity(&quot;&lt;HTML&gt; &lt;P&gt; Hello There... &lt;/P&gt; &lt;/HTML&gt;&quot;)<br/>                        .build());<br/>        myServer.start();<br/>    }<br/>}</span></pre></div></div></div><div class="ab cb nh ni nj nk" role="separator"><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn"></span></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h2 id="756e" class="np nq fq bf nr ns nt nu nv nw nx ny nz mm oa ob oc mq od oe of mu og oh oi oj bk">HTTP Protocol</h2><p id="4946" class="pw-post-body-paragraph mb mc fq md b me ok mg mh mi ol mk ml mm om mo mp mq on ms mt mu oo mw mx my fj bk">Before we dive in, let’s take a quick sec and remind ourselves of the HTTP protocol message format.</p><p id="6382" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The format of a HTTP request is text based and can be broken into the following parts:</p><p id="bb5d" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The first line consists of the HTTP method, URI and Protocol version:</p><figure class="op oq or os ot lp lh li paragraph-image"><div role="button" tabindex="0" class="lq lr ed ls bh lt"><div class="lh li pd"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*uPX6btMz8CQp_5Puaaapeg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*uPX6btMz8CQp_5Puaaapeg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*uPX6btMz8CQp_5Puaaapeg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*uPX6btMz8CQp_5Puaaapeg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*uPX6btMz8CQp_5Puaaapeg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*uPX6btMz8CQp_5Puaaapeg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uPX6btMz8CQp_5Puaaapeg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*uPX6btMz8CQp_5Puaaapeg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*uPX6btMz8CQp_5Puaaapeg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*uPX6btMz8CQp_5Puaaapeg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*uPX6btMz8CQp_5Puaaapeg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*uPX6btMz8CQp_5Puaaapeg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*uPX6btMz8CQp_5Puaaapeg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*uPX6btMz8CQp_5Puaaapeg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh kp lu c" width="700" height="240" loading="eager" role="presentation"/></picture></div></div></figure><p id="5a0d" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">This is followed by:</p><ul class=""><li id="c8b9" class="mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bk">multiple lines of headers</li><li id="4c6d" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my mz na nb bk">1 empty line</li><li id="3826" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my mz na nb bk">optional request body for POST / PUT requests</li></ul><p id="78ad" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">E.g.</p><p id="aef9" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">A HTTP GET request message:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="3379" class="oy nq fq ov b bg oz pa l pb pc">GET /testOne HTTP/1.1<br/>Host: 127.0.0.1:8080<br/>User-Agent: curl/7.84.0<br/>Accept: */*</span></pre><p id="c787" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">A HTTP POST request message:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="a99e" class="oy nq fq ov b bg oz pa l pb pc">POST /testOne HTTP/1.1<br/>Host: localhost:8080<br/>User-Agent: insomnia/2022.6.0<br/>Content-Type: text/plain<br/>Accept: */*<br/>Content-Length: 11<br/><br/>hello there</span></pre><p id="cf35" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">A HTTP Response is very similar:</p><p id="7219" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The first line of the request</p><figure class="op oq or os ot lp lh li paragraph-image"><div class="lh li pe"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*2PqNxOy3SriYoCXSMurZzw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*2PqNxOy3SriYoCXSMurZzw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*2PqNxOy3SriYoCXSMurZzw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*2PqNxOy3SriYoCXSMurZzw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*2PqNxOy3SriYoCXSMurZzw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*2PqNxOy3SriYoCXSMurZzw.png 1100w, https://miro.medium.com/v2/resize:fit:1122/format:webp/1*2PqNxOy3SriYoCXSMurZzw.png 1122w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 561px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*2PqNxOy3SriYoCXSMurZzw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*2PqNxOy3SriYoCXSMurZzw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*2PqNxOy3SriYoCXSMurZzw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*2PqNxOy3SriYoCXSMurZzw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*2PqNxOy3SriYoCXSMurZzw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*2PqNxOy3SriYoCXSMurZzw.png 1100w, https://miro.medium.com/v2/resize:fit:1122/1*2PqNxOy3SriYoCXSMurZzw.png 1122w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 561px"/><img alt="" class="bh kp lu c" width="561" height="246" loading="lazy" role="presentation"/></picture></div><figcaption class="lv lw lx lh li ly lz bf b bg z dx">HTTP Response ( first line )</figcaption></figure><p id="7170" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Overall:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="a58f" class="oy nq fq ov b bg oz pa l pb pc">STATUS LINE<br/>HEADER<br/>HEADER<br/>...<br/><br/>BODY</span></pre><p id="2d1c" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">E.g.</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="4812" class="oy nq fq ov b bg oz pa l pb pc">HTTP/1.1 200 OK<br/>Content-Type: text/plain; charset=UTF-8<br/>Connection: Keep-Alive<br/><br/>Hello there...</span></pre><p id="3baa" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Note on HTTP Versions:</p><p id="9e1c" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">One feature HTTP 1.1 introduced was persistent connections which allows 1 connection to handle multiple http requests. This is more efficient as it eliminates the need for multiple TCP handshakes.</p><p id="fa24" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">This functionality can be enabled by setting the HTTP Header <code class="cx pf pg ph ov b">Connection</code> to the value <code class="cx pf pg ph ov b">keep-alive.</code></p><p id="9edc" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">We’re going to skip this functionality below ( as well as many other parts relevant to the HTTP spec ).</p></div></div></div><div class="ab cb nh ni nj nk" role="separator"><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn"></span></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h2 id="de13" class="np nq fq bf nr ns nt nu nv nw nx ny nz mm oa ob oc mq od oe of mu og oh oi oj bk">Rough Sequence Diagram of server</h2><figure class="op oq or os ot lp lh li paragraph-image"><div role="button" tabindex="0" class="lq lr ed ls bh lt"><div class="lh li pi"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*BKUx-N3eTBRyni4zUy7ixQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*BKUx-N3eTBRyni4zUy7ixQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*BKUx-N3eTBRyni4zUy7ixQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*BKUx-N3eTBRyni4zUy7ixQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*BKUx-N3eTBRyni4zUy7ixQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*BKUx-N3eTBRyni4zUy7ixQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BKUx-N3eTBRyni4zUy7ixQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*BKUx-N3eTBRyni4zUy7ixQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*BKUx-N3eTBRyni4zUy7ixQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*BKUx-N3eTBRyni4zUy7ixQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*BKUx-N3eTBRyni4zUy7ixQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*BKUx-N3eTBRyni4zUy7ixQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*BKUx-N3eTBRyni4zUy7ixQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*BKUx-N3eTBRyni4zUy7ixQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh kp lu c" width="700" height="524" loading="eager" role="presentation"/></picture></div></div></figure><p id="e043" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The server can be broken down into the following events:</p><ol class=""><li id="28b9" class="mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my pj na nb bk">Server is started and listens for connections on a certain port</li><li id="2ab6" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">When a connection is received, use HttpHandler to handle connection ( input and output streams passed )</li><li id="f795" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Decode message using HttpDecoder</li><li id="c56e" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Route message to correct endpoint</li><li id="c59b" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Write response using HttpWriter</li></ol></div></div></div><div class="ab cb nh ni nj nk" role="separator"><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn"></span></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="a4c2" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">With that out of the way let’s get building!</p><h2 id="e6c5" class="np nq fq bf nr ns nt nu nv nw nx ny nz mm oa ob oc mq od oe of mu og oh oi oj bk">1. Server class</h2><ul class=""><li id="4509" class="mb mc fq md b me ok mg mh mi ol mk ml mm om mo mp mq on ms mt mu oo mw mx my mz na nb bk">Define port</li><li id="36fb" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my mz na nb bk">Add endpoints / routes</li><li id="faa7" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my mz na nb bk">Handle lifecycle of Request / Response</li></ul><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="086e" class="oy nq fq ov b bg oz pa l pb pc">public class Server {<br/><br/>    private final Map&lt;String, RequestRunner&gt; routes;<br/>    private final ServerSocket socket;<br/>    private final Executor threadPool;<br/>    private HttpHandler handler;<br/><br/>    public Server(int port) throws IOException {<br/>        routes = new HashMap&lt;&gt;();<br/>        threadPool = Executors.newFixedThreadPool(100);<br/>        socket = new ServerSocket(port);<br/>    }</span></pre><p id="cba9" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The threadPool created is hard coded at 100 so this will limit the number of requests that would be allowed to be handled concurrently ( I arbitrarily picked 100, ideally this would be configurable by the end user ).</p><h2 id="1fc2" class="np nq fq bf nr ns nt nu nv nw nx ny nz mm oa ob oc mq od oe of mu og oh oi oj bk">Adding Routes:</h2><p id="6f48" class="pw-post-body-paragraph mb mc fq md b me ok mg mh mi ol mk ml mm om mo mp mq on ms mt mu oo mw mx my fj bk">Let’s add a method to add Routes / Endpoints to the application. To do this we will store the route in a Map&lt;String, RequestRunner&gt;.</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="7a24" class="oy nq fq ov b bg oz pa l pb pc">public void addRoute(HttpMethod opCode, String route, RequestRunner runner) {<br/>    routes.put(opCode.name().concat(route), runner);<br/>}</span></pre><p id="aa57" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The Map key will be a combination of the Opcode of the Request ( in our case GET ) and the URI.</p><p id="537a" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The RequestRunner is a Java interface which only has 1 method which takes a HttpResponse as an argument and returns a HttpRequest object.</p><p id="d3c0" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">This allows it to be a functional interface where we can supply this using a Lambda.</p><p id="2184" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">E.g.</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="fb18" class="oy nq fq ov b bg oz pa l pb pc">public interface RequestRunner {<br/>    HttpResponse run(HttpRequest request);<br/>}</span></pre><p id="59ef" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">HttpMethod is a simple enum:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="c297" class="oy nq fq ov b bg oz pa l pb pc">public enum HttpMethod {<br/>    GET,<br/>    PUT,<br/>    POST,<br/>    PATCH<br/>}</span></pre><h2 id="5a9e" class="np nq fq bf nr ns nt nu nv nw nx ny nz mm oa ob oc mq od oe of mu og oh oi oj bk">Starting the server:</h2><p id="0a47" class="pw-post-body-paragraph mb mc fq md b me ok mg mh mi ol mk ml mm om mo mp mq on ms mt mu oo mw mx my fj bk">We’ll now add a start method which will wait for incoming requests and handle them:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="8a92" class="oy nq fq ov b bg oz pa l pb pc">public void start() throws IOException {<br/>    handler = new HttpHandler(routes);<br/><br/>    while (true) {<br/>        Socket clientConnection = socket.accept();<br/>        handleConnection(clientConnection);<br/>    }<br/>}</span></pre><p id="687e" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">socket.accept() is blocking so handleConnection will only be called when a client connects to the port defined.</p><p id="57e6" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">We’ll use the HttpHandler Object created to handle the connection.</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="4f6b" class="oy nq fq ov b bg oz pa l pb pc">private void handleConnection(Socket clientConnection) {<br/>    try {<br/>        handler.handleConnection(clientConnection.getInputStream(), clientConnection.getOutputStream());<br/>    } catch (IOException ignored) {<br/>    }<br/>}</span></pre><p id="3f2c" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">However, we don’t want this 1 request to block all other requests from executing, so we will wrap this functionality into a Runnable.</p><p id="089e" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The request / response lifecycle of each request will therefore be handled by 1 thread ( a synchronous server ).</p><p id="cfa0" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">If we wanted to be able to handle 1 request across multiple threads then we would need to use the Java NIO lower level library ( which stands for new IO ).</p><p id="0f0e" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The above therefore becomes:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="4849" class="oy nq fq ov b bg oz pa l pb pc">/*<br/> * Capture each Request / Response lifecycle in a thread<br/> * executed on the threadPool.<br/> */<br/>private void handleConnection(Socket clientConnection) {<br/>    Runnable httpRequestRunner = () -&gt; {<br/>        try {<br/>            handler.handleConnection(clientConnection.getInputStream(), clientConnection.getOutputStream());<br/>        } catch (IOException ignored) {<br/>        }<br/>    };<br/>    threadPool.execute(httpRequestRunner);<br/>}</span></pre></div></div></div><div class="ab cb nh ni nj nk" role="separator"><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn"></span></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h2 id="bae0" class="np nq fq bf nr ns nt nu nv nw nx ny nz mm oa ob oc mq od oe of mu og oh oi oj bk">2. HttpHandler</h2><ul class=""><li id="ba65" class="mb mc fq md b me ok mg mh mi ol mk ml mm om mo mp mq on ms mt mu oo mw mx my mz na nb bk">Decode HTTP Request</li><li id="e6b7" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my mz na nb bk">Route request to the correct RequestRunner</li><li id="3708" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my mz na nb bk">Write Response to output stream</li></ul><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="4e7c" class="oy nq fq ov b bg oz pa l pb pc">/**<br/> * Handle HTTP Request Response lifecycle.<br/> */<br/>public class HttpHandler {<br/><br/>    private final Map&lt;String, RequestRunner&gt; routes;<br/><br/>    public HttpHandler(final Map&lt;String, RequestRunner&gt; routes) {<br/>        this.routes = routes;<br/>    }</span></pre><p id="228a" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Handling a Request:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="608c" class="oy nq fq ov b bg oz pa l pb pc">public void handleConnection(final InputStream inputStream, final OutputStream outputStream) throws IOException {<br/>    final BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(outputStream));<br/><br/>    Optional&lt;HttpRequest&gt; request = HttpDecoder.decode(inputStream);<br/>    request.ifPresentOrElse((r) -&gt; handleRequest(r, bufferedWriter), () -&gt; handleInvalidRequest(bufferedWriter));<br/><br/>    bufferedWriter.close();<br/>    inputStream.close();<br/>}</span></pre><p id="284c" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">We decorate our OutputStream to a BufferedWriter which let’s us write text to a character-output stream.</p><p id="ddb3" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Steps:</p><ol class=""><li id="81a3" class="mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my pj na nb bk">Decode message into a HttpRequest object</li><li id="0ab3" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">If present, handle</li><li id="9e5e" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Else, handle invalid request</li><li id="e9e3" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Close output and input streams</li></ol><p id="20c7" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Invalid Request scenario:</p><p id="fb56" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Build a HTTP Response object with status code 400 and a message of “Bad Request”.</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="f82a" class="oy nq fq ov b bg oz pa l pb pc">private void handleInvalidRequest(final BufferedWriter bufferedWriter) {<br/>    HttpResponse notFoundResponse = new HttpResponse.Builder().setStatusCode(400).setEntity(&quot;Bad Request...&quot;).build();<br/>    ResponseWriter.writeResponse(bufferedWriter, notFoundResponse);<br/>}</span></pre><p id="7c9f" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Valid Request scenario:</p><p id="ebe9" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Get the route key from HttpRequest object ( uri path ), if present we extract the RequestRunner from the Map of routes, execute and write the response.</p><p id="1500" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Otherwise we create a not found Response with a status code of 404.</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="5308" class="oy nq fq ov b bg oz pa l pb pc">private void handleRequest(final HttpRequest request, final BufferedWriter bufferedWriter) {<br/>    final String routeKey = request.getHttpMethod().name().concat(request.getUri().getRawPath());<br/><br/>    if (routes.containsKey(routeKey)) {<br/>        ResponseWriter.writeResponse(bufferedWriter, routes.get(routeKey).run(request));<br/>    } else {<br/>        // Not found<br/>        ResponseWriter.writeResponse(bufferedWriter, new HttpResponse.Builder().setStatusCode(404).setEntity(&quot;Route Not Found...&quot;).build());<br/>    }<br/>}</span></pre></div></div></div><div class="ab cb nh ni nj nk" role="separator"><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn"></span></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h2 id="aa6a" class="np nq fq bf nr ns nt nu nv nw nx ny nz mm oa ob oc mq od oe of mu og oh oi oj bk">3. HttpDecoder</h2><p id="cf49" class="pw-post-body-paragraph mb mc fq md b me ok mg mh mi ol mk ml mm om mo mp mq on ms mt mu oo mw mx my fj bk">The goal of this class is to decode the input stream into a Http Request object.</p><p id="639e" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The decode method breaks this into two steps:</p><ol class=""><li id="6f5d" class="mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my pj na nb bk">Read all lines of text in the InputStream to a List&lt;String&gt;</li><li id="fa80" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Parse the List&lt;String&gt; into a HttpRequest Object ( if valid )</li></ol><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="39de" class="oy nq fq ov b bg oz pa l pb pc">/**<br/>* HttpDecoder:<br/>*          InputStreamReader -&gt; bytes to characters ( decoded with certain Charset ( ascii ) )<br/>*          BufferedReader    -&gt; character stream to text<br/>*/<br/>public class HttpDecoder {<br/><br/>  public static Optional&lt;HttpRequest&gt; decode(final InputStream inputStream) {<br/>      return readMessage(inputStream).flatMap(HttpDecoder::buildRequest);<br/>  }</span></pre><p id="6085" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Reading the message:</p><p id="1c79" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">If no data is in the InputStream we return an empty Optional, otherwise the data is read into a char[] buffer created.</p><p id="ea44" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The Scanner object is then used to read the buffer line by line and append each to an Array list that is returned.</p><p id="b588" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">If any exception occurs, an empty Optional is returned.</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="b593" class="oy nq fq ov b bg oz pa l pb pc">private static Optional&lt;List&lt;String&gt;&gt; readMessage(final InputStream inputStream) {<br/>    try {<br/>        if (!(inputStream.available() &gt; 0)) {<br/>            return Optional.empty();<br/>        }<br/><br/>        final char[] inBuffer = new char[inputStream.available()];<br/>        final InputStreamReader inReader = new InputStreamReader(inputStream);<br/>        final int read = inReader.read(inBuffer);<br/><br/>        List&lt;String&gt; message = new ArrayList&lt;&gt;();<br/><br/>        try (Scanner sc = new Scanner(new String(inBuffer))) {<br/>            while (sc.hasNextLine()) {<br/>                String line = sc.nextLine();<br/>                message.add(line);<br/>            }<br/>        }<br/><br/>        return Optional.of(message);<br/>    } catch (Exception ignored) {<br/>        return Optional.empty();<br/>    }<br/>}</span></pre><p id="3219" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Building the Http Request:</p><p id="5dce" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">This method does some simple parsing to determine if the message is a valid HTTP Request.</p><p id="34d0" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">If the message is empty or the first line does not contain three words than an empty Optional is returned.</p><p id="b809" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The first line is verified by:</p><ol class=""><li id="8082" class="mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my pj na nb bk">Using the Enum HttpMethod to extract the HTTP method for the first word</li><li id="a484" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Using the java.net.URI class to verify the URI component</li><li id="3cde" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Comparing the third word ( Protocol ) to “HTTP/1.1”</li></ol><p id="d027" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">If none of these conditions are met ( Exceptions caught ) then an Empty Optional is returned.</p><p id="269c" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">The final parsing of request headers ( remember we’re only dealing with a GET Request scenario with no body ) in done within the addRequestHeaders method.</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="9b8d" class="oy nq fq ov b bg oz pa l pb pc">private static Optional&lt;HttpRequest&gt; buildRequest(List&lt;String&gt; message) {<br/>    if (message.isEmpty()) {<br/>        return Optional.empty();<br/>    }<br/><br/>    String firstLine = message.get(0);<br/>    String[] httpInfo = firstLine.split(&quot; &quot;);<br/><br/>    if (httpInfo.length != 3) {<br/>        return Optional.empty();<br/>    }<br/><br/>    String protocolVersion = httpInfo[2];<br/>    if (!protocolVersion.equals(&quot;HTTP/1.1&quot;)) {<br/>        return Optional.empty();<br/>    }<br/><br/>    try {<br/>        Builder requestBuilder = new Builder();<br/>        requestBuilder.setHttpMethod(HttpMethod.valueOf(httpInfo[0]));<br/>        requestBuilder.setUri(new URI(httpInfo[1]));<br/>        return Optional.of(addRequestHeaders(message, requestBuilder));<br/>    } catch (URISyntaxException | IllegalArgumentException e) {<br/>        return Optional.empty();<br/>    }<br/>}</span></pre><pre class="pk ou ov ow bp ox bb bk"><span id="c6f4" class="oy nq fq ov b bg oz pa l pb pc">public enum HttpMethod {<br/>    GET,<br/>    PUT,<br/>    POST,<br/>    PATCH<br/>}</span></pre><p id="cc91" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Parsing the request headers:</p><p id="8cab" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">We skip the first line in the message as we’ve already read this above, for each remaining line we check for the colon character ‘:’ and simply read what is before as the header name and what comes after as the header value.</p><p id="7395" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">At the end of the method we add the new Map&lt;String, List&lt;String&gt;&gt; object created as the request headers using the Builder object passed.</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="6c32" class="oy nq fq ov b bg oz pa l pb pc">private static HttpRequest addRequestHeaders(final List&lt;String&gt; message, final Builder builder) {<br/>    final Map&lt;String, List&lt;String&gt;&gt; requestHeaders = new HashMap&lt;&gt;();<br/><br/>    if (message.size() &gt; 1) {<br/>        for (int i = 1; i &lt; message.size(); i++) {<br/>            String header = message.get(i);<br/>            int colonIndex = header.indexOf(&#x27;:&#x27;);<br/><br/>            if (! (colonIndex &gt; 0 &amp;&amp; header.length() &gt; colonIndex + 1)) {<br/>                break;<br/>            }<br/><br/>            String headerName = header.substring(0, colonIndex);<br/>            String headerValue = header.substring(colonIndex + 1);<br/><br/>            requestHeaders.compute(headerName, (key, values) -&gt; {<br/>                if (values != null) {<br/>                    values.add(headerValue);<br/>                } else {<br/>                    values = new ArrayList&lt;&gt;();<br/>                }<br/>                return values;<br/>            });<br/>        }<br/>    }<br/><br/>    builder.setRequestHeaders(requestHeaders);<br/>    return builder.build();<br/>}</span></pre><p id="c87c" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">🎉 we’ve now decoded our input stream into a HttpRequest Object.</p></div></div></div><div class="ab cb nh ni nj nk" role="separator"><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn"></span></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h2 id="f5d9" class="np nq fq bf nr ns nt nu nv nw nx ny nz mm oa ob oc mq od oe of mu og oh oi oj bk">4. ResponseWriter</h2><p id="4628" class="pw-post-body-paragraph mb mc fq md b me ok mg mh mi ol mk ml mm om mo mp mq on ms mt mu oo mw mx my fj bk">Going back to our HttpHandler we can see both the handleRequest and handleInvalidRequest use the static method writeResponse within the ResponseWriter class.</p><p id="c4a0" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">This is used to write the HttpResponse object to the output stream.</p><p id="a993" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">In this example we’re simply writing the body as <code class="cx pf pg ph ov b">text/plain</code> but in reality this class could possibly use different implementations for writing the body depending on the type of data being wrote ( JSON / XML etc ).</p><p id="295c" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Writer steps:</p><ol class=""><li id="b358" class="mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my pj na nb bk">Extract status code</li><li id="c922" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Extract status code description</li><li id="b988" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Build header Strings ( E.g. “Content-Length: 50” )</li><li id="04ff" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Write first line ( protocol, status code, status code description )</li><li id="b85a" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Write request headers in following lines</li><li id="cdf0" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Write empty line</li><li id="089d" class="mb mc fq md b me nc mg mh mi nd mk ml mm ne mo mp mq nf ms mt mu ng mw mx my pj na nb bk">Write body ( if present )</li></ol><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="dff5" class="oy nq fq ov b bg oz pa l pb pc">/**<br/> * Write a HTTPResponse to an outputstream<br/> * @param outputStream - the outputstream<br/> * @param response - the HTTPResponse<br/> */<br/> public static void writeResponse(final BufferedWriter outputStream, final HttpResponse response) {<br/>     try {<br/>         final int statusCode = response.getStatusCode();<br/>         final String statusCodeMeaning = HttpStatusCode.STATUS_CODES.get(statusCode);<br/>         final List&lt;String&gt; responseHeaders = buildHeaderStrings(response.getResponseHeaders());<br/> <br/>         outputStream.write(&quot;HTTP/1.1 &quot; + statusCode + &quot; &quot; + statusCodeMeaning + &quot;\r\n&quot;);<br/> <br/>         for (String header : responseHeaders) {<br/>             outputStream.write(header);<br/>         }<br/> <br/>         final Optional&lt;String&gt; entityString = response.getEntity().flatMap(ResponseWriter::getResponseString);<br/>         if (entityString.isPresent()) {<br/>             final String encodedString = new String(entityString.get().getBytes(StandardCharsets.UTF_8), StandardCharsets.UTF_8);<br/>             outputStream.write(&quot;Content-Length: &quot; + encodedString.getBytes().length + &quot;\r\n&quot;);<br/>             outputStream.write(&quot;\r\n&quot;);<br/>             outputStream.write(encodedString);<br/>         } else {<br/>             outputStream.write(&quot;\r\n&quot;);<br/>         }<br/>     } catch (Exception ignored) {<br/>     }<br/> }</span></pre><p id="a613" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Extracting header strings:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="5172" class="oy nq fq ov b bg oz pa l pb pc">private static List&lt;String&gt; buildHeaderStrings(final Map&lt;String, List&lt;String&gt;&gt; responseHeaders) {<br/>    final List&lt;String&gt; responseHeadersList = new ArrayList&lt;&gt;();<br/><br/>    responseHeaders.forEach((name, values) -&gt; {<br/>        final StringBuilder valuesCombined = new StringBuilder();<br/>        values.forEach(valuesCombined::append);<br/>        valuesCombined.append(&quot;;&quot;);<br/><br/>        responseHeadersList.add(name + &quot;: &quot; + valuesCombined + &quot;\r\n&quot;);<br/>    });<br/><br/>    return responseHeadersList;<br/>}</span></pre><p id="d08f" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Convert response body entity to String:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="9300" class="oy nq fq ov b bg oz pa l pb pc">private static Optional&lt;String&gt; getResponseString(final Object entity) {<br/>    // Currently only supporting Strings<br/>    if (entity instanceof String) {<br/>        try {<br/>            return Optional.of(entity.toString());<br/>        } catch (Exception ignored) {<br/>        }<br/>    }<br/>    return Optional.empty();<br/>}</span></pre></div></div></div><div class="ab cb nh ni nj nk" role="separator"><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn"></span></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="1b8e" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">To finish let’s quickly look at the HttpRequest / HttpResponse Pojos and test our application:</p><p id="7d29" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">HttpRequest:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="5178" class="oy nq fq ov b bg oz pa l pb pc">package Sockets.pojos;<br/><br/>import Sockets.contract.HttpMethod;<br/><br/>import java.net.URI;<br/>import java.util.List;<br/>import java.util.Map;<br/><br/>public class HttpRequest {<br/>  private final HttpMethod httpMethod;<br/>  private final URI uri;<br/>  private final Map&lt;String, List&lt;String&gt;&gt; requestHeaders;<br/><br/>  private HttpRequest(HttpMethod opCode,<br/>                     URI uri,<br/>                     Map&lt;String, List&lt;String&gt;&gt; requestHeaders) {<br/>      this.httpMethod = opCode;<br/>      this.uri = uri;<br/>      this.requestHeaders = requestHeaders;<br/>  }<br/><br/>  public URI getUri() {<br/>      return uri;<br/>  }<br/><br/>  public HttpMethod getHttpMethod() {<br/>      return httpMethod;<br/>  }<br/><br/>  public Map&lt;String, List&lt;String&gt;&gt; getRequestHeaders() {<br/>      return requestHeaders;<br/>  }<br/><br/>  public static class Builder {<br/>      private HttpMethod httpMethod;<br/>      private URI uri;<br/>      private Map&lt;String, List&lt;String&gt;&gt; requestHeaders;<br/><br/>     public Builder() {<br/>     }<br/><br/>     public void setHttpMethod(HttpMethod httpMethod) {<br/>         this.httpMethod = httpMethod;<br/>     }<br/><br/>     public void setUri(URI uri) {<br/>         this.uri = uri;<br/>     }<br/><br/>     public void setRequestHeaders(Map&lt;String, List&lt;String&gt;&gt; requestHeaders) {<br/>         this.requestHeaders = requestHeaders;<br/>     }<br/><br/>     public HttpRequest build() {<br/>         return new HttpRequest(httpMethod, uri, requestHeaders);<br/>     }<br/>  }<br/>}</span></pre><p id="bd1f" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">HttpResponse:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="4c77" class="oy nq fq ov b bg oz pa l pb pc">package Sockets.pojos;<br/><br/>import java.time.ZoneOffset;<br/>import java.time.ZonedDateTime;<br/>import java.time.format.DateTimeFormatter;<br/>import java.util.HashMap;<br/>import java.util.List;<br/>import java.util.Map;<br/>import java.util.Optional;<br/><br/>public class HttpResponse {<br/>  private final Map&lt;String, List&lt;String&gt;&gt; responseHeaders;<br/>  private final int statusCode;<br/><br/>  private final Optional&lt;Object&gt; entity;<br/><br/>  /**<br/>   * Headers should contain the following:<br/>   * Date: &lt; date &gt;<br/>   * Server: &lt; my server &gt;<br/>   * Content-Type: text/plain, application/json etc...<br/>   * Content-Length: size of payload<br/>   */<br/>  private HttpResponse(final Map&lt;String, List&lt;String&gt;&gt; responseHeaders, final int statusCode, final Optional&lt;Object&gt; entity) {<br/>      this.responseHeaders = responseHeaders;<br/>      this.statusCode = statusCode;<br/>      this.entity = entity;<br/>  }<br/>  public Map&lt;String, List&lt;String&gt;&gt; getResponseHeaders() {<br/>      return responseHeaders;<br/>  }<br/>  public int getStatusCode() {<br/>      return statusCode;<br/>  }<br/><br/>  public Optional&lt;Object&gt; getEntity() {<br/>      return entity;<br/>  }<br/><br/>  public static class Builder {<br/>      private final Map&lt;String, List&lt;String&gt;&gt; responseHeaders;<br/>      private int statusCode;<br/><br/>      private Optional&lt;Object&gt; entity;<br/><br/>      public Builder() {<br/>          // Create default headers - server etc<br/>          responseHeaders = new HashMap&lt;&gt;();<br/>          responseHeaders.put(&quot;Server&quot;, List.of(&quot;MyServer&quot;));<br/>          responseHeaders.put(&quot;Date&quot;, List.of(DateTimeFormatter.RFC_1123_DATE_TIME.format(ZonedDateTime.now(ZoneOffset.UTC))));<br/><br/>          entity = Optional.empty();<br/>      }<br/><br/>      public Builder setStatusCode(final int statusCode) {<br/>          this.statusCode = statusCode;<br/>          return this;<br/>      }<br/><br/>      public Builder addHeader(final String name, final String value) {<br/>          responseHeaders.put(name, List.of(value));<br/>          return this;<br/>      }<br/><br/>      public Builder setEntity(final Object entity) {<br/>          if (entity != null) {<br/>              this.entity = Optional.of(entity);<br/>          }<br/>          return this;<br/>      }<br/><br/>      public HttpResponse build() {<br/>          return new HttpResponse(responseHeaders, statusCode, entity);<br/>      }<br/>  }</span></pre></div></div></div><div class="ab cb nh ni nj nk" role="separator"><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn no"></span><span class="nl by bm nm nn"></span></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="dbd1" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">Testing!</p><p id="87a0" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">If we boot up our App and generate a HTTP GET Request to the URI /testOne we should see the following response:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="8e30" class="oy nq fq ov b bg oz pa l pb pc">➜  sockets git:(master) ✗ curl http://127.0.0.1:8080/testOne          <br/>&lt;HTML&gt; &lt;P&gt; Hello There... &lt;/P&gt; &lt;/HTML&gt;% </span></pre><p id="c7d9" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">to a URI not defined:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="abb6" class="oy nq fq ov b bg oz pa l pb pc">➜  sockets git:(master) ✗ curl http://127.0.0.1:8080/testTwo<br/>Route Not Found...%   </span></pre><p id="8b59" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">and finally an invalid HTTP Request:</p><pre class="op oq or os ot ou ov ow bp ox bb bk"><span id="3f9c" class="oy nq fq ov b bg oz pa l pb pc">➜  sockets git:(master) ✗ echo hi | nc 127.0.0.1 8080 <br/>HTTP/1.1 400 BAD_REQUEST<br/>Server: MyServer;<br/>Date: Mon, 9 Jan 2023 22:17:20 GMT;<br/>Content-Length: 18<br/><br/>Invalid Request...% </span></pre><p id="d254" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">This has only scratched the surface of building a HTTP server but hopefully as a learning exercise it has been useful to gain a better understanding of some of the possible steps going on behind the scenes.</p><p id="55e1" class="pw-post-body-paragraph mb mc fq md b me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my fj bk">All code referenced can be found here: <a class="af ma" href="https://github.com/rjlfinn/java-http-server" rel="noopener ugc nofollow" target="_blank">https://github.com/rjlfinn/java-http-server</a></p></div></div></div></div></section></div></div></article></div><div class="ab cb"><div class="ci bh ev ew ex ey"><div class="pl pm ab hs"><div class="pn ab"><a class="po ay am ao" href="https://medium.com/tag/java?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><div class="pp ed cx pq fa pr ps bf b bg z bk pt">Java</div></a></div><div class="pn ab"><a class="po ay am ao" href="https://medium.com/tag/https?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><div class="pp ed cx pq fa pr ps bf b bg z bk pt">Https</div></a></div><div class="pn ab"><a class="po ay am ao" href="https://medium.com/tag/http-request?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><div class="pp ed cx pq fa pr ps bf b bg z bk pt">Http Request</div></a></div><div class="pn ab"><a class="po ay am ao" href="https://medium.com/tag/http-server?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><div class="pp ed cx pq fa pr ps bf b bg z bk pt">Http Server</div></a></div><div class="pn ab"><a class="po ay am ao" href="https://medium.com/tag/http-response?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><div class="pp ed cx pq fa pr ps bf b bg z bk pt">Http Response</div></a></div></div></div></div><div class="l"></div><footer class="pu pv pw px py ab q pz qa c"><div class="l ae"><div class="ab cb"><div class="ci bh ev ew ex ey"><div class="ab cp qb"><div class="ab q jb"><div class="qc l"><span class="l qd qe qf e d"><div class="ab q jb jc"><div class="pw-multi-vote-icon ed jd je jf jg"><div class=""><div class="jh ji jj jk jl jm jn am jo jp jq jg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"></path></svg></div></div></div><div class="pw-multi-vote-count l jr js jt ju jv jw jx"><p class="bf b dy z dx"><span class="ji">--</span></p></div></div></span><span class="l h g f qg qh"><div class="ab q jb jc"><div class="pw-multi-vote-icon ed jd je jf jg"><div class=""><div class="jh ji jj jk jl jm jn am jo jp jq jg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"></path></svg></div></div></div><div class="pw-multi-vote-count l jr js jt ju jv jw jx"><p class="bf b dy z dx"><span class="ji">--</span></p></div></div></span></div><div class="bq ab"><div><div class="bm" aria-hidden="false"><button class="ao jh ka kb ab q ee kc kd" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="jz"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bf b bg z dx"><span class="pw-responses-count jy jz">3</span></p></button></div></div></div></div><div class="ab q"><div class="no l hp"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="footerBookmarkButton" class="af ee ah ai aj ak al kf an ao ap hm kg kh ki" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"></path></svg></button></div></div></div><div class="no l hp"><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="af ee ah ai aj ak al kf an ao ap hm kq kr kd ks"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg></button></div></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="footerStoryOptionsButton" class="af ee ah ai aj ak al kf an ao ap hm kq kr kd ks"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></footer><div class="qi l"><div class="ab cb"><div class="ci bh ev ew ex ey"><div class="ab qj qk ql hr hq"><div class="qm qn qo qp qq qr qs qt qu qv ab cp"><div class="h k"><a tabindex="0" rel="noopener follow" href="/?source=post_page---post_author_info--9b6af7f9b3cd--------------------------------"><div class="l ed"><img alt="Robert Finn" class="l ep by gy gx cx" src="https://miro.medium.com/v2/resize:fill:96:96/1*YwQJq47rTxkj17YOWSTnEg.jpeg" width="48" height="48" loading="lazy"/><div class="el by l gy gx em n ay qw"></div></div></a></div><div class="j i d"><a tabindex="0" rel="noopener follow" href="/?source=post_page---post_author_info--9b6af7f9b3cd--------------------------------"><div class="l ed"><img alt="Robert Finn" class="l ep by qx qy cx" src="https://miro.medium.com/v2/resize:fill:128:128/1*YwQJq47rTxkj17YOWSTnEg.jpeg" width="64" height="64" loading="lazy"/><div class="el by l qx qy em n ay qw"></div></div></a></div><div class="j i d qz hp"><div class="ab"><button class="bf b bg z ra pp rb rc rd re rf rg rh ri rj rk rl rm rn ro rp ep bm rq lw">Follow</button></div></div></div><div class="ab co rr"><div class="rs rt ru rv rw l"><a class="af ag ah aj ak al am an ao ap aq ar as at ab q" rel="noopener follow" href="/?source=post_page---post_author_info--9b6af7f9b3cd--------------------------------"><h2 class="pw-author-name bf ry rz sa sb sc sd se mm ob oc mq oe of mu oh oi bk"><span class="fj rx">Written by <!-- -->Robert Finn</span></h2></a><div class="pn ab gw"><div class="l hp"><span class="pw-follower-count bf b bg z dx"><a class="af ag ah ai aj ak al am an ao ap aq ar hh" rel="noopener follow" href="/followers?source=post_page---post_author_info--9b6af7f9b3cd--------------------------------">111 Followers</a></span></div><div class="bf b bg z dx ab sf"><span class="hi l" aria-hidden="true"><span class="bf b bg z dx">·</span></span><a class="af ag ah ai aj ak al am an ao ap aq ar hh" rel="noopener follow" href="/following?source=post_page---post_author_info--9b6af7f9b3cd--------------------------------">1 Following</a></div></div><div class="pk l"></div></div></div><div class="h k"><div class="ab"><button class="bf b bg z ra pp rb rc rd re rf rg rh ri rj rk rl rm rn ro rp ep bm rq lw">Follow</button></div></div></div></div></div></div><div class="sg sh si sj sk l"><div class="sl bh r qi"></div><div class="ab cb"><div class="ci bh ev ew ex ey"><div class="ab q cp"><h2 class="bf ry sm sn nv so sp nz sq sr ss st su sv sw sx sy bk">Responses (<!-- -->3<!-- -->)</h2><div class="ab sz"><div><div class="bm" aria-hidden="false"><a class="ta tb" href="https://policy.medium.com/medium-rules-30e5502c4eb4?source=post_page---post_responses--9b6af7f9b3cd--------------------------------" rel="noopener follow" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25"><path fill-rule="evenodd" d="M11.987 5.036a.754.754 0 0 1 .914-.01c.972.721 1.767 1.218 2.6 1.543.828.322 1.719.485 2.887.505a.755.755 0 0 1 .741.757c-.018 3.623-.43 6.256-1.449 8.21-1.034 1.984-2.662 3.209-4.966 4.083a.75.75 0 0 1-.537-.003c-2.243-.874-3.858-2.095-4.897-4.074-1.024-1.951-1.457-4.583-1.476-8.216a.755.755 0 0 1 .741-.757c1.195-.02 2.1-.182 2.923-.503.827-.322 1.6-.815 2.519-1.535m.468.903c-.897.69-1.717 1.21-2.623 1.564-.898.35-1.856.527-3.026.565.037 3.45.469 5.817 1.36 7.515.884 1.684 2.25 2.762 4.284 3.571 2.092-.81 3.465-1.89 4.344-3.575.886-1.698 1.299-4.065 1.334-7.512-1.149-.039-2.091-.217-2.99-.567-.906-.353-1.745-.873-2.683-1.561m-.009 9.155a2.672 2.672 0 1 0 0-5.344 2.672 2.672 0 0 0 0 5.344m0 1a3.672 3.672 0 1 0 0-7.344 3.672 3.672 0 0 0 0 7.344m-1.813-3.777.525-.526.916.917 1.623-1.625.526.526-2.149 2.152z" clip-rule="evenodd"></path></svg></a></div></div></div></div><div class="tc td te tf tg th ti l"></div><div class="nh l"><button class="bf b bg z bk pp tj tk tl tm kc tn to rj hm tp tq tr rn ts tt tu tv tw ro rp ep bm rq lw">See all responses</button></div></div></div></div><div class="tx ty tz ua ub l bx"><div class="h k j"><div class="sl bh uc ud"></div><div class="ab cb"><div class="ci bh ev ew ex ey"><div class="ue ab jb hs"><div class="uf ug l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><p class="bf b dy z dx">Help</p></a></div><div class="uf ug l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><p class="bf b dy z dx">Status</p></a></div><div class="uf ug l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/about?autoplay=1&amp;source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><p class="bf b dy z dx">About</p></a></div><div class="uf ug l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><p class="bf b dy z dx">Careers</p></a></div><div class="uf ug l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="pressinquiries@medium.com?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><p class="bf b dy z dx">Press</p></a></div><div class="uf ug l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><p class="bf b dy z dx">Blog</p></a></div><div class="uf ug l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><p class="bf b dy z dx">Privacy</p></a></div><div class="uf ug l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><p class="bf b dy z dx">Terms</p></a></div><div class="uf ug l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><p class="bf b dy z dx">Text to speech</p></a></div><div class="uf l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/business?source=post_page-----9b6af7f9b3cd--------------------------------" rel="noopener follow"><p class="bf b dy z dx">Teams</p></a></div></div></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__="main-20250210-220826-261d0e0287"</script><script>window.__GRAPHQL_URI__ = "https://rjlfinn.medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"algolia":{"queries":{}},"cache":{"experimentGroupSet":true,"reason":"User is logged in","group":"disabled","tags":["group-edgeCachePosts","post-9b6af7f9b3cd","user-b15b69aeb782"],"serverVariantState":"","middlewareEnabled":true,"cacheStatus":"DYNAMIC","shouldUseCache":false,"vary":[],"pubFeaturingPostPageLabelEnabled":false},"client":{"hydrated":false,"isUs":false,"isNativeMedium":false,"isSafariMobile":false,"isSafari":false,"isFirefox":false,"routingEntity":{"type":"USER","id":"b15b69aeb782","explicit":true},"viewerIsBot":false},"debug":{"requestId":"f3f5b7e2-7fc3-464b-8cbc-e5518554fcdc","requestTag":"","hybridDevServices":[],"originalSpanCarrier":{"traceparent":"00-90aeb7a3fe70efb11b1d42366a3b3036-981b8d5fe6ce5788-01"}},"multiVote":{"clapsPerPost":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":false},"hideGoogleOneTap":false,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Frjlfinn.medium.com\u002Fcreating-a-http-server-in-java-9b6af7f9b3cd","host":"rjlfinn.medium.com","hostname":"rjlfinn.medium.com","referrer":"","hasSetReferrer":false,"susiModal":{"step":null,"operation":"register"},"postRead":false,"partnerProgram":{"selectedCountryCode":null}},"config":{"nodeEnv":"production","version":"main-20250210-220826-261d0e0287","target":"production","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","recaptchaEnterpriseKeyId":"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp","datadog":{"applicationId":"6702d87d-a7e0-42fe-bbcb-95b469547ea0","clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","rumToken":"pubf9cc52896502b9413b68ba36fc0c7162","context":{"deployment":{"target":"production","tag":"main-20250210-220826-261d0e0287","commit":"261d0e0287783f1b8aa59cb13dc87a7794951a72"}},"datacenter":"us"},"googleAnalyticsCode":"G-7JY7T788PK","googlePay":{"apiVersion":"2","apiVersionMinor":"0","merchantId":"BCR2DN6TV7EMTGBM","merchantName":"Medium","instanceMerchantId":"13685562959212738550"},"applePay":{"version":3},"signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumMastodonDomainName":"me.dm","mediumOwnedAndOperatedCollectionIds":["8a9336e5bb4","b7e45b22fec3","193b68bd4fba","8d6b8a439e32","54c98c43354d","3f6ecf56618","d944778ce714","92d2092dc598","ae2a65f35510","1285ba81cada","544c7006046e","fc8964313712","40187e704f1c","88d9857e584e","7b6769f2748b","bcc38c8f6edf","cef6983b292","cb8577c9149e","444d13b52878","713d7dbc99b0","ef8e90590e66","191186aaafa0","55760f21cdc5","9dc80918cc93","bdc4052bbdba","8ccfed20cbb2"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"topicToTagMappings":{"accessibility":"accessibility","addiction":"addiction","android-development":"android-development","art":"art","artificial-intelligence":"artificial-intelligence","astrology":"astrology","basic-income":"basic-income","beauty":"beauty","biotech":"biotech","blockchain":"blockchain","books":"books","business":"business","cannabis":"cannabis","cities":"cities","climate-change":"climate-change","comics":"comics","coronavirus":"coronavirus","creativity":"creativity","cryptocurrency":"cryptocurrency","culture":"culture","cybersecurity":"cybersecurity","data-science":"data-science","design":"design","digital-life":"digital-life","disability":"disability","economy":"economy","education":"education","equality":"equality","family":"family","feminism":"feminism","fiction":"fiction","film":"film","fitness":"fitness","food":"food","freelancing":"freelancing","future":"future","gadgets":"gadgets","gaming":"gaming","gun-control":"gun-control","health":"health","history":"history","humor":"humor","immigration":"immigration","ios-development":"ios-development","javascript":"javascript","justice":"justice","language":"language","leadership":"leadership","lgbtqia":"lgbtqia","lifestyle":"lifestyle","machine-learning":"machine-learning","makers":"makers","marketing":"marketing","math":"math","media":"media","mental-health":"mental-health","mindfulness":"mindfulness","money":"money","music":"music","neuroscience":"neuroscience","nonfiction":"nonfiction","outdoors":"outdoors","parenting":"parenting","pets":"pets","philosophy":"philosophy","photography":"photography","podcasts":"podcast","poetry":"poetry","politics":"politics","privacy":"privacy","product-management":"product-management","productivity":"productivity","programming":"programming","psychedelics":"psychedelics","psychology":"psychology","race":"race","relationships":"relationships","religion":"religion","remote-work":"remote-work","san-francisco":"san-francisco","science":"science","self":"self","self-driving-cars":"self-driving-cars","sexuality":"sexuality","social-media":"social-media","society":"society","software-engineering":"software-engineering","space":"space","spirituality":"spirituality","sports":"sports","startups":"startup","style":"style","technology":"technology","transportation":"transportation","travel":"travel","true-crime":"true-crime","tv":"tv","ux":"ux","venture-capital":"venture-capital","visual-design":"visual-design","work":"work","world":"world","writing":"writing"},"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"7*V1_7XP4snlmqrc_0Njontw.png","height":110,"width":500},"postLogo":{"imageId":"bd978bb536350a710e8efb012513429cabdc4c28700604261aeda246d0f980b7","height":810,"width":1440},"postPreviewImage":{"imageId":"1*hn4v1tCaJy7cWMyb0bpNpQ.png","height":386,"width":579}},"collectionStructuredData":{"8d6b8a439e32":{"name":"Elemental","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F980\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png","width":980,"height":159}}},"3f6ecf56618":{"name":"Forge","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F596\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png","width":596,"height":183}}},"ae2a65f35510":{"name":"GEN","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F264\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png","width":264,"height":140}}},"88d9857e584e":{"name":"LEVEL","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png","width":540,"height":108}}},"7b6769f2748b":{"name":"Marker","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F383\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png","width":383,"height":92}}},"444d13b52878":{"name":"OneZero","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*cw32fIqCbRWzwJaoQw6BUg.png","width":540,"height":123}}},"8ccfed20cbb2":{"name":"Zora","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png","width":540,"height":106}}}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":[],"COVID_APPLICABLE_TOPIC_NAMES":[],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":[],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Find out more about the U.S. election results here.","markups":[{"start":46,"end":50,"href":"https:\u002F\u002Fcookpolitical.com\u002F2020-national-popular-vote-tracker"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","braintree":{"enabled":true,"merchantId":"m56f8fqpf7ngnrd4","merchantAccountId":{"usd":"AMediumCorporation_instant","eur":"amediumcorporation_EUR","cad":"amediumcorporation_CAD"},"publicKey":"ds2nn34bg2z7j5gd","braintreeEnvironment":"production","dashboardUrl":"https:\u002F\u002Fwww.braintreegateway.com\u002Fmerchants","gracePeriodDurationInDays":14,"mediumMembershipPlanId":{"monthly":"ce105f8c57a3","monthlyV2":"e8a5e126-792b-4ee6-8fba-d574c1b02fc5","monthlyWithTrial":"d5ee3dbe3db8","monthlyPremium":"fa741a9b47a2","yearly":"a40ad4a43185","yearlyV2":"3815d7d6-b8ca-4224-9b8c-182f9047866e","yearlyStaff":"d74fb811198a","yearlyWithTrial":"b3bc7350e5c7","yearlyPremium":"e21bd2c12166","monthlyOneYearFree":"e6c0637a-2bad-4171-ab4f-3c268633d83c","monthly25PercentOffFirstYear":"235ecc62-0cdb-49ae-9378-726cd21c504b","monthly20PercentOffFirstYear":"ba518864-9c13-4a99-91ca-411bf0cac756","monthly15PercentOffFirstYear":"594c029b-9f89-43d5-88f8-8173af4e070e","monthly10PercentOffFirstYear":"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0","monthlyForStudents":"629ebe51-da7d-41fd-8293-34cd2f2030a8","yearlyOneYearFree":"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1","yearly25PercentOffFirstYear":"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34","yearly20PercentOffFirstYear":"47565488-435b-47f8-bf93-40d5fbe0ebc8","yearly15PercentOffFirstYear":"8259809b-0881-47d9-acf7-6c001c7f720f","yearly10PercentOffFirstYear":"9dd694fb-96e1-472c-8d9e-3c868d5c1506","yearlyForStudents":"e29345ef-ab1c-4234-95c5-70e50fe6bc23","monthlyCad":"p52orjkaceei","yearlyCad":"h4q9g2up9ktt"},"braintreeDiscountId":{"oneMonthFree":"MONTHS_FREE_01","threeMonthsFree":"MONTHS_FREE_03","sixMonthsFree":"MONTHS_FREE_06","fiftyPercentOffOneYear":"FIFTY_PERCENT_OFF_ONE_YEAR"},"3DSecureVersion":"2","defaultCurrency":"usd","providerPlanIdCurrency":{"4ycw":"usd","rz3b":"usd","3kqm":"usd","jzw6":"usd","c2q2":"usd","nnsw":"usd","q8qw":"usd","d9y6":"usd","fx7w":"cad","nwf2":"cad"}},"paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v","paypal":{"host":"https:\u002F\u002Fapi.paypal.com:443","clientMode":"production","serverMode":"live","webhookId":"4G466076A0294510S","monthlyPlan":{"planId":"P-9WR0658853113943TMU5FDQA","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlan":{"planId":"P-7N8963881P8875835MU5JOPQ","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com\u002Fredeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"},"oldMonthlyPlan":{"planId":"P-96U02458LM656772MJZUVH2Y","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlan":{"planId":"P-59P80963JF186412JJZU3SMI","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"monthlyPlanWithTrial":{"planId":"P-66C21969LR178604GJPVKUKY","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlanWithTrial":{"planId":"P-6XW32684EX226940VKCT2MFA","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oldMonthlyPlanNoSetupFee":{"planId":"P-4N046520HR188054PCJC7LJI","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlanNoSetupFee":{"planId":"P-7A4913502Y5181304CJEJMXQ","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"sdkUrl":"https:\u002F\u002Fwww.paypal.com\u002Fsdk\u002Fjs"},"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","log":{"json":true,"level":"info"},"imageUploadMaxSizeMb":25,"staffPicks":{"title":"Staff Picks","catalogId":"c7bc6e1ee00f"}},"session":{"xsrf":"b45378871ee9"}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","variantFlags":[{"__typename":"VariantFlag","name":"onboarding_tags_from_top_views","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"skip_fs_cache_user_vals","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pub_featuring_post_page_label","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_recirc_model","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"get_highlights_from_engagement","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_social_share_sheet","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_boost_experiment","valueType":{"__typename":"VariantFlagString","value":"experiment"}},{"__typename":"VariantFlag","name":"ios_in_app_free_trial","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_abandoned_cart_promotion_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_first_story","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pp_v4","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_miro_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_monthly_plan","valueType":{"__typename":"VariantFlagString","value":"60e220181034"}},{"__typename":"VariantFlag","name":"enable_abandoned_paywall_promotion_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_google_one_tap","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tipping_v0_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_medium_com_canonical_urls","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"rex_generator_max_candidates","valueType":{"__typename":"VariantFlagNumber","value":1000}},{"__typename":"VariantFlag","name":"android_enable_syntax_highlight","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_integration","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_hybrid_ranking_model","valueType":{"__typename":"VariantFlagString","value":"experiment"}},{"__typename":"VariantFlag","name":"enable_engagement_service_publish_response","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_speechify_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"limit_post_referrers","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_author_cards","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_diversification_rex","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_susi_redesign_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_trial_membership","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_cache_less_following_feed","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ml_rank_rex_anno","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"goliath_externalsearch_enable_comment_deindexation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_access","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_author_cards_byline","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_server_upstream_deadlines","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mastodon_for_members_username_selection","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_friend_links_creation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_dynamic_aspirational_paywall","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_group_gifting","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"textshots_userid","valueType":{"__typename":"VariantFlagString","value":""}},{"__typename":"VariantFlag","name":"mobile_custom_app_icon","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_continue_this_thread","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_medium2_kbfd","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_manage_membership_flow","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pub_featuring","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_custom_moc_preview_for_google_referrer","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_iceland_nux","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_lists_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_footer_app_buttons","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_recommended_publishers_query","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_updated_pub_recs_ui","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_two_hour_refresh","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_dynamic_programming_paywall","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_branch_io","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pill_based_home_feed","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pre_pp_v4","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tick_landing_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_bg_post_post","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_import","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_update_explore_wtf","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"num_post_bottom_responses_to_show","valueType":{"__typename":"VariantFlagNumber","value":3}},{"__typename":"VariantFlag","name":"enable_braintree_client","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_image_sharer","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_boost_nia_v01","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rex_reading_history","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_offline_reading","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tag_recs","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_cancellation_discount_v1_1","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_dynamic_paywall_programming","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_dynamic_paywall_aspiriational","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_annual_plan","valueType":{"__typename":"VariantFlagString","value":"2c754bcc2995"}},{"__typename":"VariantFlag","name":"enable_ios_easy_resubscribe","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_conversion_ranker_v2","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"enable_susi_redesign_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_trust_service_recaptcha","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_verified_author","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_apple_pay","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_home_post_menu","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_remove_twitter_onboarding_step","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_cancellation_discount_v1_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_autorefresh","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_c","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sharer_create_post_share_key","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sharer_validate_post_share_key","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_aurora_pub_follower_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rex_aggregator_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"reengagement_notification_duration","valueType":{"__typename":"VariantFlagNumber","value":3}},{"__typename":"VariantFlag","name":"enable_lo_homepage","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"enable_android_offline_reading","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_automod","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_configure_pronouns","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sprig","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_legacy_feed_in_iceland","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_response_markup","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rex_new_push_notification_endpoint","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_apple_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_creator_welcome_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"limit_user_follows","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_monthly_premium_plan","valueType":{"__typename":"VariantFlagString","value":"12a660186432"}},{"__typename":"VariantFlag","name":"enable_verifications_service","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_friend_links_postpage_banners","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_annual_premium_plan","valueType":{"__typename":"VariantFlagString","value":"4a442ace1476"}},{"__typename":"VariantFlag","name":"enable_tipping_v0_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"signup_services","valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"}},{"__typename":"VariantFlag","name":"enable_maim_the_meter","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_seamless_social_sharing","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_recaptcha_enterprise","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"can_send_tips_v0","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_post_publish_permission_check","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_simplified_digest_v2_b","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_eventstats_event_processing","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_intrinsic_automatic_actions","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_members_only_audio","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"disable_partner_program_enrollment","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_abandoned_paywall_email_experiment","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"enable_winback_promotion_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_app_flirty_thirty","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_apple_sign_in","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_premium_tier_badge","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_speechify_widget","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_update_topic_portals_wtf","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"browsable_stream_config_bucket","valueType":{"__typename":"VariantFlagString","value":"curated-topics"}},{"__typename":"VariantFlag","name":"signin_services","valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"}},{"__typename":"VariantFlag","name":"enable_google_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_stripe_customers","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_deprecate_legacy_providers_v3","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_see_pronouns","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"price_smoke_test_monthly","valueType":{"__typename":"VariantFlagString","value":""}},{"__typename":"VariantFlag","name":"android_enable_friend_links_postpage_banners","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mastodon_avatar_upload","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tribute_landing_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_switch_plan_premium_tier","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"redefined_top_posts","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_rating_prompt_stories_read_threshold","valueType":{"__typename":"VariantFlagNumber","value":2}},{"__typename":"VariantFlag","name":"enable_post_bottom_responses","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_premium_tier","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ranker_v10","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"glyph_font_set","valueType":{"__typename":"VariantFlagString","value":"m2-unbound-source-serif-pro"}},{"__typename":"VariantFlag","name":"enable_post_bottom_responses_input","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_plans_page_branding","valueType":{"__typename":"VariantFlagString","value":"group_1"}},{"__typename":"VariantFlag","name":"ios_display_paywall_after_onboarding","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_google_pay","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_starspace","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_signup","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_test_auth","valueType":{"__typename":"VariantFlagString","value":"disallow"}},{"__typename":"VariantFlag","name":"enable_deviant_get_variant_flag_from_medium2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_plans_page_payment_form","valueType":{"__typename":"VariantFlagString","value":"group_1"}},{"__typename":"VariantFlag","name":"enable_mastodon_for_members","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_editor_new_publishing_flow","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_archive_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"coronavirus_topic_recirc","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pub_featuring_stats","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_topic_portals","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_lock_responses","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"reader_fair_distribution_non_qp","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_post_bottom_responses_native","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rito_upstream_deadlines","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_friend_links_creation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_marketing_emails","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_verified_book_author","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"price_smoke_test_yearly","valueType":{"__typename":"VariantFlagString","value":""}},{"__typename":"VariantFlag","name":"enable_auto_follow_on_subscribe","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_paypal","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_conversion_model_v2","valueType":{"__typename":"VariantFlagString","value":"group_2"}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_all_recs_surfaces","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_newsletter_lo_flow_custom_domains","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_iceland_forced_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_homepage","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pp_country_expansion","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"can_receive_tips_v0","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_entities_to_follow_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}}],"viewer":{"__ref":"User:13fbb74aa197"},"collectionByDomainOrSlug({\"domainOrSlug\":\"rjlfinn.medium.com\"})":null,"postResult({\"id\":\"9b6af7f9b3cd\"})":{"__ref":"Post:9b6af7f9b3cd"}},"UserViewerEdge:userId:13fbb74aa197-viewerId:13fbb74aa197":{"__typename":"UserViewerEdge","id":"userId:13fbb74aa197-viewerId:13fbb74aa197","createdAt":1710326011012},"User:13fbb74aa197":{"__typename":"User","id":"13fbb74aa197","allowEmailAddressSharingEditorWriter":false,"dismissableFlags":["TOOLTIP_ABOUT_EDITOR"],"emailObfuscated":"ol••••••@tcd.ie","geolocation":{"__typename":"Geolocation","country":"IE"},"hasGroupGiftingEnabled":false,"hasPastMemberships":false,"hasSubdomain":false,"imageId":"0*nxbIxj7AzyX6gnF5","isEligibleToImportEmails":false,"isEligibleToViewNewResponses":true,"isMembershipTrialEligible":true,"isSuspended":false,"membership":null,"name":"Eniola Olumeyan","partnerProgramEnrollment":null,"postSubscribeMembershipUpsellShownAt":0,"styleEditorOnboardingVersionSeen":0,"twitterScreenName":"","unverifiedEmail":"","username":"olumeyae","viewerEdge":{"__ref":"UserViewerEdge:userId:13fbb74aa197-viewerId:13fbb74aa197"},"pronouns":[]},"LinkedAccounts:b15b69aeb782":{"__typename":"LinkedAccounts","mastodon":null,"id":"b15b69aeb782"},"User:b15b69aeb782":{"__typename":"User","id":"b15b69aeb782","linkedAccounts":{"__ref":"LinkedAccounts:b15b69aeb782"},"isSuspended":false,"name":"Robert Finn","imageId":"1*YwQJq47rTxkj17YOWSTnEg.jpeg","customDomainState":{"__typename":"CustomDomainState","live":{"__typename":"CustomDomain","domain":"rjlfinn.medium.com"}},"hasSubdomain":true,"username":"rjlfinn","verifications":{"__typename":"VerifiedInfo","isBookAuthor":false},"socialStats":{"__typename":"SocialStats","followerCount":111,"followingCount":1,"collectionFollowingCount":0},"bio":"","membership":null,"allowNotes":true,"viewerEdge":{"__ref":"UserViewerEdge:userId:b15b69aeb782-viewerId:13fbb74aa197"},"twitterScreenName":""},"Topic:decb52b64abf":{"__typename":"Topic","slug":"programming","id":"decb52b64abf","name":"Programming"},"Paragraph:b132595f769a_0":{"__typename":"Paragraph","id":"b132595f769a_0","name":"a5ea","type":"H3","href":null,"layout":null,"metadata":null,"text":"Creating a HTTP Server in Java","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*kkD3XGh8Tdb71HC_HqlxOA.jpeg":{"__typename":"ImageMetadata","id":"1*kkD3XGh8Tdb71HC_HqlxOA.jpeg","originalHeight":3655,"originalWidth":5484,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:b132595f769a_1":{"__typename":"Paragraph","id":"b132595f769a_1","name":"c742","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*kkD3XGh8Tdb71HC_HqlxOA.jpeg"},"text":"Photo by Nguyen Tong Hai Van on Unsplash","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":9,"end":28,"href":"https:\u002F\u002Funsplash.com\u002Fes\u002F@ngtghaivan?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":32,"end":40,"href":"https:\u002F\u002Funsplash.com\u002Fphotos\u002Fpkj935eY62A?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_2":{"__typename":"Paragraph","id":"b132595f769a_2","name":"3170","type":"P","href":null,"layout":null,"metadata":null,"text":"Java has a massive ecosystem of HTTP servers and frameworks which sit on top.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_3":{"__typename":"Paragraph","id":"b132595f769a_3","name":"126d","type":"P","href":null,"layout":null,"metadata":null,"text":"Spring is a popular framework that lets you program against it’s API and easily configure the underlying servlet container used ( Tomcat, Jetty, Undertow ).","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_4":{"__typename":"Paragraph","id":"b132595f769a_4","name":"39f2","type":"P","href":null,"layout":null,"metadata":null,"text":"Other frameworks such as Vertx and Play! are built on top of Netty — a low level asynchronous event-driven networking framework.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_5":{"__typename":"Paragraph","id":"b132595f769a_5","name":"3c24","type":"P","href":null,"layout":null,"metadata":null,"text":"There is also the Java EE landscape which includes the likes of the JBoss, Wildfly and Weblogic application servers.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_6":{"__typename":"Paragraph","id":"b132595f769a_6","name":"efae","type":"P","href":null,"layout":null,"metadata":null,"text":"When you build a RESTFul service with one of these frameworks you work with the API and don’t think too much about what is going on under the hood.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_7":{"__typename":"Paragraph","id":"b132595f769a_7","name":"2572","type":"P","href":null,"layout":null,"metadata":null,"text":"In this blog post we’ll explore how you could go about building a functional API on top of a basic HTTP server by simply using Sockets in Java.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_8":{"__typename":"Paragraph","id":"b132595f769a_8","name":"49cd","type":"P","href":null,"layout":null,"metadata":null,"text":"Specifically we’ll:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_9":{"__typename":"Paragraph","id":"b132595f769a_9","name":"1d0f","type":"ULI","href":null,"layout":null,"metadata":null,"text":"use the Sockets API to handle HTTP requests","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_10":{"__typename":"Paragraph","id":"b132595f769a_10","name":"f014","type":"ULI","href":null,"layout":null,"metadata":null,"text":"implement a very basic example of decoding a HTTP GET Request","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_11":{"__typename":"Paragraph","id":"b132595f769a_11","name":"db7e","type":"ULI","href":null,"layout":null,"metadata":null,"text":"expose a functional API to allow an end user to define routes and embed the server in their application","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_12":{"__typename":"Paragraph","id":"b132595f769a_12","name":"6b0c","type":"P","href":null,"layout":null,"metadata":null,"text":"Hopefully this will help you develop a better understanding of what could be going on behind the scenes.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_13":{"__typename":"Paragraph","id":"b132595f769a_13","name":"4f76","type":"P","href":null,"layout":null,"metadata":null,"text":"The goal here is not to implement the full specification of a HTTP server with a fully fledged API on top — I’m not even sure the Socket API is low level enough to implement the full spec, e.g. we’ll just look at a GET request as a learning exercise.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_14":{"__typename":"Paragraph","id":"b132595f769a_14","name":"304f","type":"H4","href":null,"layout":null,"metadata":null,"text":"The API produced:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_15":{"__typename":"Paragraph","id":"b132595f769a_15","name":"6bac","type":"P","href":null,"layout":null,"metadata":null,"text":"If we have a Java Gradle application with a build.gradle.kts file we can simply include a dependency on the new server project we’re going to create called ‘functional-server-library’.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_16":{"__typename":"Paragraph","id":"b132595f769a_16","name":"35ff","type":"PRE","href":null,"layout":null,"metadata":null,"text":"implementation(project(\":functional-server-library\"))","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"less"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_17":{"__typename":"Paragraph","id":"b132595f769a_17","name":"6655","type":"P","href":null,"layout":null,"metadata":null,"text":"Our main application can then use this library as it will expose a Server class.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_18":{"__typename":"Paragraph","id":"b132595f769a_18","name":"6d28","type":"P","href":null,"layout":null,"metadata":null,"text":"The server class will:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_19":{"__typename":"Paragraph","id":"b132595f769a_19","name":"982a","type":"ULI","href":null,"layout":null,"metadata":null,"text":"take in the port number it should listen for incoming requests on","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_20":{"__typename":"Paragraph","id":"b132595f769a_20","name":"a196","type":"ULI","href":null,"layout":null,"metadata":null,"text":"allows routes to be added using the addRoute method","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_21":{"__typename":"Paragraph","id":"b132595f769a_21","name":"b14c","type":"ULI","href":null,"layout":null,"metadata":null,"text":"start listening for requests when the start method is called","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_22":{"__typename":"Paragraph","id":"b132595f769a_22","name":"2684","type":"P","href":null,"layout":null,"metadata":null,"text":"Therefore the end app will look something like:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_23":{"__typename":"Paragraph","id":"b132595f769a_23","name":"3f3b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"public class App {\n    public static void main(String[] args) throws IOException {\n        Server myServer = new Server(8080);\n        myServer.addRoute(GET, \"\u002FtestOne\",\n                (req) -\u003E new HttpResponse.Builder()\n                        .setStatusCode(200)\n                        .addHeader(\"Content-Type\", \"text\u002Fhtml\")\n                        .setEntity(\"\u003CHTML\u003E \u003CP\u003E Hello There... \u003C\u002FP\u003E \u003C\u002FHTML\u003E\")\n                        .build());\n        myServer.start();\n    }\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_24":{"__typename":"Paragraph","id":"b132595f769a_24","name":"756e","type":"H4","href":null,"layout":null,"metadata":null,"text":"HTTP Protocol","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_25":{"__typename":"Paragraph","id":"b132595f769a_25","name":"4946","type":"P","href":null,"layout":null,"metadata":null,"text":"Before we dive in, let’s take a quick sec and remind ourselves of the HTTP protocol message format.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_26":{"__typename":"Paragraph","id":"b132595f769a_26","name":"6382","type":"P","href":null,"layout":null,"metadata":null,"text":"The format of a HTTP request is text based and can be broken into the following parts:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_27":{"__typename":"Paragraph","id":"b132595f769a_27","name":"bb5d","type":"P","href":null,"layout":null,"metadata":null,"text":"The first line consists of the HTTP method, URI and Protocol version:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*uPX6btMz8CQp_5Puaaapeg.png":{"__typename":"ImageMetadata","id":"1*uPX6btMz8CQp_5Puaaapeg.png","originalHeight":506,"originalWidth":1480,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:b132595f769a_28":{"__typename":"Paragraph","id":"b132595f769a_28","name":"8568","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*uPX6btMz8CQp_5Puaaapeg.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_29":{"__typename":"Paragraph","id":"b132595f769a_29","name":"5a0d","type":"P","href":null,"layout":null,"metadata":null,"text":"This is followed by:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_30":{"__typename":"Paragraph","id":"b132595f769a_30","name":"c8b9","type":"ULI","href":null,"layout":null,"metadata":null,"text":"multiple lines of headers","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_31":{"__typename":"Paragraph","id":"b132595f769a_31","name":"4c6d","type":"ULI","href":null,"layout":null,"metadata":null,"text":"1 empty line","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_32":{"__typename":"Paragraph","id":"b132595f769a_32","name":"3826","type":"ULI","href":null,"layout":null,"metadata":null,"text":"optional request body for POST \u002F PUT requests","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_33":{"__typename":"Paragraph","id":"b132595f769a_33","name":"78ad","type":"P","href":null,"layout":null,"metadata":null,"text":"E.g.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_34":{"__typename":"Paragraph","id":"b132595f769a_34","name":"aef9","type":"P","href":null,"layout":null,"metadata":null,"text":"A HTTP GET request message:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_35":{"__typename":"Paragraph","id":"b132595f769a_35","name":"3379","type":"PRE","href":null,"layout":null,"metadata":null,"text":"GET \u002FtestOne HTTP\u002F1.1\nHost: 127.0.0.1:8080\nUser-Agent: curl\u002F7.84.0\nAccept: *\u002F*","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"DISABLED","lang":null},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_36":{"__typename":"Paragraph","id":"b132595f769a_36","name":"c787","type":"P","href":null,"layout":null,"metadata":null,"text":"A HTTP POST request message:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_37":{"__typename":"Paragraph","id":"b132595f769a_37","name":"a99e","type":"PRE","href":null,"layout":null,"metadata":null,"text":"POST \u002FtestOne HTTP\u002F1.1\nHost: localhost:8080\nUser-Agent: insomnia\u002F2022.6.0\nContent-Type: text\u002Fplain\nAccept: *\u002F*\nContent-Length: 11\n\nhello there","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"DISABLED","lang":null},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_38":{"__typename":"Paragraph","id":"b132595f769a_38","name":"cf35","type":"P","href":null,"layout":null,"metadata":null,"text":"A HTTP Response is very similar:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_39":{"__typename":"Paragraph","id":"b132595f769a_39","name":"7219","type":"P","href":null,"layout":null,"metadata":null,"text":"The first line of the request","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*2PqNxOy3SriYoCXSMurZzw.png":{"__typename":"ImageMetadata","id":"1*2PqNxOy3SriYoCXSMurZzw.png","originalHeight":246,"originalWidth":561,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:b132595f769a_40":{"__typename":"Paragraph","id":"b132595f769a_40","name":"3af9","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*2PqNxOy3SriYoCXSMurZzw.png"},"text":"HTTP Response ( first line )","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_41":{"__typename":"Paragraph","id":"b132595f769a_41","name":"7170","type":"P","href":null,"layout":null,"metadata":null,"text":"Overall:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_42":{"__typename":"Paragraph","id":"b132595f769a_42","name":"a58f","type":"PRE","href":null,"layout":null,"metadata":null,"text":"STATUS LINE\nHEADER\nHEADER\n...\n\nBODY","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"css"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_43":{"__typename":"Paragraph","id":"b132595f769a_43","name":"2d1c","type":"P","href":null,"layout":null,"metadata":null,"text":"E.g.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_44":{"__typename":"Paragraph","id":"b132595f769a_44","name":"4812","type":"PRE","href":null,"layout":null,"metadata":null,"text":"HTTP\u002F1.1 200 OK\nContent-Type: text\u002Fplain; charset=UTF-8\nConnection: Keep-Alive\n\nHello there...","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"makefile"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_45":{"__typename":"Paragraph","id":"b132595f769a_45","name":"3baa","type":"P","href":null,"layout":null,"metadata":null,"text":"Note on HTTP Versions:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_46":{"__typename":"Paragraph","id":"b132595f769a_46","name":"9e1c","type":"P","href":null,"layout":null,"metadata":null,"text":"One feature HTTP 1.1 introduced was persistent connections which allows 1 connection to handle multiple http requests. This is more efficient as it eliminates the need for multiple TCP handshakes.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_47":{"__typename":"Paragraph","id":"b132595f769a_47","name":"fa24","type":"P","href":null,"layout":null,"metadata":null,"text":"This functionality can be enabled by setting the HTTP Header Connection to the value keep-alive.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":61,"end":71,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":85,"end":96,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_48":{"__typename":"Paragraph","id":"b132595f769a_48","name":"9edc","type":"P","href":null,"layout":null,"metadata":null,"text":"We’re going to skip this functionality below ( as well as many other parts relevant to the HTTP spec ).","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_49":{"__typename":"Paragraph","id":"b132595f769a_49","name":"de13","type":"H4","href":null,"layout":null,"metadata":null,"text":"Rough Sequence Diagram of server","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*BKUx-N3eTBRyni4zUy7ixQ.png":{"__typename":"ImageMetadata","id":"1*BKUx-N3eTBRyni4zUy7ixQ.png","originalHeight":1524,"originalWidth":2038,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:b132595f769a_50":{"__typename":"Paragraph","id":"b132595f769a_50","name":"897a","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*BKUx-N3eTBRyni4zUy7ixQ.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_51":{"__typename":"Paragraph","id":"b132595f769a_51","name":"e043","type":"P","href":null,"layout":null,"metadata":null,"text":"The server can be broken down into the following events:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_52":{"__typename":"Paragraph","id":"b132595f769a_52","name":"28b9","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Server is started and listens for connections on a certain port","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_53":{"__typename":"Paragraph","id":"b132595f769a_53","name":"2ab6","type":"OLI","href":null,"layout":null,"metadata":null,"text":"When a connection is received, use HttpHandler to handle connection ( input and output streams passed )","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_54":{"__typename":"Paragraph","id":"b132595f769a_54","name":"f795","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Decode message using HttpDecoder","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_55":{"__typename":"Paragraph","id":"b132595f769a_55","name":"c56e","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Route message to correct endpoint","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_56":{"__typename":"Paragraph","id":"b132595f769a_56","name":"c59b","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Write response using HttpWriter","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_57":{"__typename":"Paragraph","id":"b132595f769a_57","name":"a4c2","type":"P","href":null,"layout":null,"metadata":null,"text":"With that out of the way let’s get building!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_58":{"__typename":"Paragraph","id":"b132595f769a_58","name":"e6c5","type":"H4","href":null,"layout":null,"metadata":null,"text":"1. Server class","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_59":{"__typename":"Paragraph","id":"b132595f769a_59","name":"4509","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Define port","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_60":{"__typename":"Paragraph","id":"b132595f769a_60","name":"36fb","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Add endpoints \u002F routes","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_61":{"__typename":"Paragraph","id":"b132595f769a_61","name":"faa7","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Handle lifecycle of Request \u002F Response","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_62":{"__typename":"Paragraph","id":"b132595f769a_62","name":"086e","type":"PRE","href":null,"layout":null,"metadata":null,"text":"public class Server {\n\n    private final Map\u003CString, RequestRunner\u003E routes;\n    private final ServerSocket socket;\n    private final Executor threadPool;\n    private HttpHandler handler;\n\n    public Server(int port) throws IOException {\n        routes = new HashMap\u003C\u003E();\n        threadPool = Executors.newFixedThreadPool(100);\n        socket = new ServerSocket(port);\n    }","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_63":{"__typename":"Paragraph","id":"b132595f769a_63","name":"cba9","type":"P","href":null,"layout":null,"metadata":null,"text":"The threadPool created is hard coded at 100 so this will limit the number of requests that would be allowed to be handled concurrently ( I arbitrarily picked 100, ideally this would be configurable by the end user ).","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_64":{"__typename":"Paragraph","id":"b132595f769a_64","name":"1fc2","type":"H4","href":null,"layout":null,"metadata":null,"text":"Adding Routes:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_65":{"__typename":"Paragraph","id":"b132595f769a_65","name":"6f48","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s add a method to add Routes \u002F Endpoints to the application. To do this we will store the route in a Map\u003CString, RequestRunner\u003E.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_66":{"__typename":"Paragraph","id":"b132595f769a_66","name":"7a24","type":"PRE","href":null,"layout":null,"metadata":null,"text":"public void addRoute(HttpMethod opCode, String route, RequestRunner runner) {\n    routes.put(opCode.name().concat(route), runner);\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"typescript"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_67":{"__typename":"Paragraph","id":"b132595f769a_67","name":"aa57","type":"P","href":null,"layout":null,"metadata":null,"text":"The Map key will be a combination of the Opcode of the Request ( in our case GET ) and the URI.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_68":{"__typename":"Paragraph","id":"b132595f769a_68","name":"537a","type":"P","href":null,"layout":null,"metadata":null,"text":"The RequestRunner is a Java interface which only has 1 method which takes a HttpResponse as an argument and returns a HttpRequest object.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_69":{"__typename":"Paragraph","id":"b132595f769a_69","name":"d3c0","type":"P","href":null,"layout":null,"metadata":null,"text":"This allows it to be a functional interface where we can supply this using a Lambda.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_70":{"__typename":"Paragraph","id":"b132595f769a_70","name":"2184","type":"P","href":null,"layout":null,"metadata":null,"text":"E.g.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_71":{"__typename":"Paragraph","id":"b132595f769a_71","name":"fb18","type":"PRE","href":null,"layout":null,"metadata":null,"text":"public interface RequestRunner {\n    HttpResponse run(HttpRequest request);\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_72":{"__typename":"Paragraph","id":"b132595f769a_72","name":"59ef","type":"P","href":null,"layout":null,"metadata":null,"text":"HttpMethod is a simple enum:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_73":{"__typename":"Paragraph","id":"b132595f769a_73","name":"c297","type":"PRE","href":null,"layout":null,"metadata":null,"text":"public enum HttpMethod {\n    GET,\n    PUT,\n    POST,\n    PATCH\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_74":{"__typename":"Paragraph","id":"b132595f769a_74","name":"5a9e","type":"H4","href":null,"layout":null,"metadata":null,"text":"Starting the server:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_75":{"__typename":"Paragraph","id":"b132595f769a_75","name":"0a47","type":"P","href":null,"layout":null,"metadata":null,"text":"We’ll now add a start method which will wait for incoming requests and handle them:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_76":{"__typename":"Paragraph","id":"b132595f769a_76","name":"8a92","type":"PRE","href":null,"layout":null,"metadata":null,"text":"public void start() throws IOException {\n    handler = new HttpHandler(routes);\n\n    while (true) {\n        Socket clientConnection = socket.accept();\n        handleConnection(clientConnection);\n    }\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_77":{"__typename":"Paragraph","id":"b132595f769a_77","name":"687e","type":"P","href":null,"layout":null,"metadata":null,"text":"socket.accept() is blocking so handleConnection will only be called when a client connects to the port defined.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_78":{"__typename":"Paragraph","id":"b132595f769a_78","name":"57e6","type":"P","href":null,"layout":null,"metadata":null,"text":"We’ll use the HttpHandler Object created to handle the connection.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_79":{"__typename":"Paragraph","id":"b132595f769a_79","name":"4f6b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"private void handleConnection(Socket clientConnection) {\n    try {\n        handler.handleConnection(clientConnection.getInputStream(), clientConnection.getOutputStream());\n    } catch (IOException ignored) {\n    }\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_80":{"__typename":"Paragraph","id":"b132595f769a_80","name":"3f2c","type":"P","href":null,"layout":null,"metadata":null,"text":"However, we don’t want this 1 request to block all other requests from executing, so we will wrap this functionality into a Runnable.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_81":{"__typename":"Paragraph","id":"b132595f769a_81","name":"089e","type":"P","href":null,"layout":null,"metadata":null,"text":"The request \u002F response lifecycle of each request will therefore be handled by 1 thread ( a synchronous server ).","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_82":{"__typename":"Paragraph","id":"b132595f769a_82","name":"cfa0","type":"P","href":null,"layout":null,"metadata":null,"text":"If we wanted to be able to handle 1 request across multiple threads then we would need to use the Java NIO lower level library ( which stands for new IO ).","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_83":{"__typename":"Paragraph","id":"b132595f769a_83","name":"0f0e","type":"P","href":null,"layout":null,"metadata":null,"text":"The above therefore becomes:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_84":{"__typename":"Paragraph","id":"b132595f769a_84","name":"4849","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F*\n * Capture each Request \u002F Response lifecycle in a thread\n * executed on the threadPool.\n *\u002F\nprivate void handleConnection(Socket clientConnection) {\n    Runnable httpRequestRunner = () -\u003E {\n        try {\n            handler.handleConnection(clientConnection.getInputStream(), clientConnection.getOutputStream());\n        } catch (IOException ignored) {\n        }\n    };\n    threadPool.execute(httpRequestRunner);\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_85":{"__typename":"Paragraph","id":"b132595f769a_85","name":"bae0","type":"H4","href":null,"layout":null,"metadata":null,"text":"2. HttpHandler","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_86":{"__typename":"Paragraph","id":"b132595f769a_86","name":"ba65","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Decode HTTP Request","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_87":{"__typename":"Paragraph","id":"b132595f769a_87","name":"e6b7","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Route request to the correct RequestRunner","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_88":{"__typename":"Paragraph","id":"b132595f769a_88","name":"3708","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Write Response to output stream","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_89":{"__typename":"Paragraph","id":"b132595f769a_89","name":"4e7c","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F**\n * Handle HTTP Request Response lifecycle.\n *\u002F\npublic class HttpHandler {\n\n    private final Map\u003CString, RequestRunner\u003E routes;\n\n    public HttpHandler(final Map\u003CString, RequestRunner\u003E routes) {\n        this.routes = routes;\n    }","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"cpp"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_90":{"__typename":"Paragraph","id":"b132595f769a_90","name":"228a","type":"P","href":null,"layout":null,"metadata":null,"text":"Handling a Request:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_91":{"__typename":"Paragraph","id":"b132595f769a_91","name":"608c","type":"PRE","href":null,"layout":null,"metadata":null,"text":"public void handleConnection(final InputStream inputStream, final OutputStream outputStream) throws IOException {\n    final BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(outputStream));\n\n    Optional\u003CHttpRequest\u003E request = HttpDecoder.decode(inputStream);\n    request.ifPresentOrElse((r) -\u003E handleRequest(r, bufferedWriter), () -\u003E handleInvalidRequest(bufferedWriter));\n\n    bufferedWriter.close();\n    inputStream.close();\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_92":{"__typename":"Paragraph","id":"b132595f769a_92","name":"284c","type":"P","href":null,"layout":null,"metadata":null,"text":"We decorate our OutputStream to a BufferedWriter which let’s us write text to a character-output stream.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_93":{"__typename":"Paragraph","id":"b132595f769a_93","name":"ddb3","type":"P","href":null,"layout":null,"metadata":null,"text":"Steps:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_94":{"__typename":"Paragraph","id":"b132595f769a_94","name":"81a3","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Decode message into a HttpRequest object","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_95":{"__typename":"Paragraph","id":"b132595f769a_95","name":"0ab3","type":"OLI","href":null,"layout":null,"metadata":null,"text":"If present, handle","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_96":{"__typename":"Paragraph","id":"b132595f769a_96","name":"9e5e","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Else, handle invalid request","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_97":{"__typename":"Paragraph","id":"b132595f769a_97","name":"e9e3","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Close output and input streams","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_98":{"__typename":"Paragraph","id":"b132595f769a_98","name":"20c7","type":"P","href":null,"layout":null,"metadata":null,"text":"Invalid Request scenario:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_99":{"__typename":"Paragraph","id":"b132595f769a_99","name":"fb56","type":"P","href":null,"layout":null,"metadata":null,"text":"Build a HTTP Response object with status code 400 and a message of “Bad Request”.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_100":{"__typename":"Paragraph","id":"b132595f769a_100","name":"f82a","type":"PRE","href":null,"layout":null,"metadata":null,"text":"private void handleInvalidRequest(final BufferedWriter bufferedWriter) {\n    HttpResponse notFoundResponse = new HttpResponse.Builder().setStatusCode(400).setEntity(\"Bad Request...\").build();\n    ResponseWriter.writeResponse(bufferedWriter, notFoundResponse);\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_101":{"__typename":"Paragraph","id":"b132595f769a_101","name":"7c9f","type":"P","href":null,"layout":null,"metadata":null,"text":"Valid Request scenario:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_102":{"__typename":"Paragraph","id":"b132595f769a_102","name":"ebe9","type":"P","href":null,"layout":null,"metadata":null,"text":"Get the route key from HttpRequest object ( uri path ), if present we extract the RequestRunner from the Map of routes, execute and write the response.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_103":{"__typename":"Paragraph","id":"b132595f769a_103","name":"1500","type":"P","href":null,"layout":null,"metadata":null,"text":"Otherwise we create a not found Response with a status code of 404.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_104":{"__typename":"Paragraph","id":"b132595f769a_104","name":"5308","type":"PRE","href":null,"layout":null,"metadata":null,"text":"private void handleRequest(final HttpRequest request, final BufferedWriter bufferedWriter) {\n    final String routeKey = request.getHttpMethod().name().concat(request.getUri().getRawPath());\n\n    if (routes.containsKey(routeKey)) {\n        ResponseWriter.writeResponse(bufferedWriter, routes.get(routeKey).run(request));\n    } else {\n        \u002F\u002F Not found\n        ResponseWriter.writeResponse(bufferedWriter, new HttpResponse.Builder().setStatusCode(404).setEntity(\"Route Not Found...\").build());\n    }\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_105":{"__typename":"Paragraph","id":"b132595f769a_105","name":"aa6a","type":"H4","href":null,"layout":null,"metadata":null,"text":"3. HttpDecoder","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_106":{"__typename":"Paragraph","id":"b132595f769a_106","name":"cf49","type":"P","href":null,"layout":null,"metadata":null,"text":"The goal of this class is to decode the input stream into a Http Request object.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_107":{"__typename":"Paragraph","id":"b132595f769a_107","name":"639e","type":"P","href":null,"layout":null,"metadata":null,"text":"The decode method breaks this into two steps:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_108":{"__typename":"Paragraph","id":"b132595f769a_108","name":"6f5d","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Read all lines of text in the InputStream to a List\u003CString\u003E","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_109":{"__typename":"Paragraph","id":"b132595f769a_109","name":"fa80","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Parse the List\u003CString\u003E into a HttpRequest Object ( if valid )","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_110":{"__typename":"Paragraph","id":"b132595f769a_110","name":"39de","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F**\n* HttpDecoder:\n*          InputStreamReader -\u003E bytes to characters ( decoded with certain Charset ( ascii ) )\n*          BufferedReader    -\u003E character stream to text\n*\u002F\npublic class HttpDecoder {\n\n  public static Optional\u003CHttpRequest\u003E decode(final InputStream inputStream) {\n      return readMessage(inputStream).flatMap(HttpDecoder::buildRequest);\n  }","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_111":{"__typename":"Paragraph","id":"b132595f769a_111","name":"6085","type":"P","href":null,"layout":null,"metadata":null,"text":"Reading the message:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_112":{"__typename":"Paragraph","id":"b132595f769a_112","name":"1c79","type":"P","href":null,"layout":null,"metadata":null,"text":"If no data is in the InputStream we return an empty Optional, otherwise the data is read into a char[] buffer created.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_113":{"__typename":"Paragraph","id":"b132595f769a_113","name":"ea44","type":"P","href":null,"layout":null,"metadata":null,"text":"The Scanner object is then used to read the buffer line by line and append each to an Array list that is returned.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_114":{"__typename":"Paragraph","id":"b132595f769a_114","name":"b588","type":"P","href":null,"layout":null,"metadata":null,"text":"If any exception occurs, an empty Optional is returned.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_115":{"__typename":"Paragraph","id":"b132595f769a_115","name":"b593","type":"PRE","href":null,"layout":null,"metadata":null,"text":"private static Optional\u003CList\u003CString\u003E\u003E readMessage(final InputStream inputStream) {\n    try {\n        if (!(inputStream.available() \u003E 0)) {\n            return Optional.empty();\n        }\n\n        final char[] inBuffer = new char[inputStream.available()];\n        final InputStreamReader inReader = new InputStreamReader(inputStream);\n        final int read = inReader.read(inBuffer);\n\n        List\u003CString\u003E message = new ArrayList\u003C\u003E();\n\n        try (Scanner sc = new Scanner(new String(inBuffer))) {\n            while (sc.hasNextLine()) {\n                String line = sc.nextLine();\n                message.add(line);\n            }\n        }\n\n        return Optional.of(message);\n    } catch (Exception ignored) {\n        return Optional.empty();\n    }\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_116":{"__typename":"Paragraph","id":"b132595f769a_116","name":"3219","type":"P","href":null,"layout":null,"metadata":null,"text":"Building the Http Request:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_117":{"__typename":"Paragraph","id":"b132595f769a_117","name":"5dce","type":"P","href":null,"layout":null,"metadata":null,"text":"This method does some simple parsing to determine if the message is a valid HTTP Request.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_118":{"__typename":"Paragraph","id":"b132595f769a_118","name":"34d0","type":"P","href":null,"layout":null,"metadata":null,"text":"If the message is empty or the first line does not contain three words than an empty Optional is returned.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_119":{"__typename":"Paragraph","id":"b132595f769a_119","name":"b809","type":"P","href":null,"layout":null,"metadata":null,"text":"The first line is verified by:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_120":{"__typename":"Paragraph","id":"b132595f769a_120","name":"8082","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Using the Enum HttpMethod to extract the HTTP method for the first word","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_121":{"__typename":"Paragraph","id":"b132595f769a_121","name":"a484","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Using the java.net.URI class to verify the URI component","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_122":{"__typename":"Paragraph","id":"b132595f769a_122","name":"3cde","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Comparing the third word ( Protocol ) to “HTTP\u002F1.1”","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_123":{"__typename":"Paragraph","id":"b132595f769a_123","name":"d027","type":"P","href":null,"layout":null,"metadata":null,"text":"If none of these conditions are met ( Exceptions caught ) then an Empty Optional is returned.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_124":{"__typename":"Paragraph","id":"b132595f769a_124","name":"269c","type":"P","href":null,"layout":null,"metadata":null,"text":"The final parsing of request headers ( remember we’re only dealing with a GET Request scenario with no body ) in done within the addRequestHeaders method.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_125":{"__typename":"Paragraph","id":"b132595f769a_125","name":"9b8d","type":"PRE","href":null,"layout":null,"metadata":null,"text":"private static Optional\u003CHttpRequest\u003E buildRequest(List\u003CString\u003E message) {\n    if (message.isEmpty()) {\n        return Optional.empty();\n    }\n\n    String firstLine = message.get(0);\n    String[] httpInfo = firstLine.split(\" \");\n\n    if (httpInfo.length != 3) {\n        return Optional.empty();\n    }\n\n    String protocolVersion = httpInfo[2];\n    if (!protocolVersion.equals(\"HTTP\u002F1.1\")) {\n        return Optional.empty();\n    }\n\n    try {\n        Builder requestBuilder = new Builder();\n        requestBuilder.setHttpMethod(HttpMethod.valueOf(httpInfo[0]));\n        requestBuilder.setUri(new URI(httpInfo[1]));\n        return Optional.of(addRequestHeaders(message, requestBuilder));\n    } catch (URISyntaxException | IllegalArgumentException e) {\n        return Optional.empty();\n    }\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_126":{"__typename":"Paragraph","id":"b132595f769a_126","name":"c6f4","type":"PRE","href":null,"layout":null,"metadata":null,"text":"public enum HttpMethod {\n    GET,\n    PUT,\n    POST,\n    PATCH\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_127":{"__typename":"Paragraph","id":"b132595f769a_127","name":"cc91","type":"P","href":null,"layout":null,"metadata":null,"text":"Parsing the request headers:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_128":{"__typename":"Paragraph","id":"b132595f769a_128","name":"8cab","type":"P","href":null,"layout":null,"metadata":null,"text":"We skip the first line in the message as we’ve already read this above, for each remaining line we check for the colon character ‘:’ and simply read what is before as the header name and what comes after as the header value.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_129":{"__typename":"Paragraph","id":"b132595f769a_129","name":"7395","type":"P","href":null,"layout":null,"metadata":null,"text":"At the end of the method we add the new Map\u003CString, List\u003CString\u003E\u003E object created as the request headers using the Builder object passed.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_130":{"__typename":"Paragraph","id":"b132595f769a_130","name":"6c32","type":"PRE","href":null,"layout":null,"metadata":null,"text":"private static HttpRequest addRequestHeaders(final List\u003CString\u003E message, final Builder builder) {\n    final Map\u003CString, List\u003CString\u003E\u003E requestHeaders = new HashMap\u003C\u003E();\n\n    if (message.size() \u003E 1) {\n        for (int i = 1; i \u003C message.size(); i++) {\n            String header = message.get(i);\n            int colonIndex = header.indexOf(':');\n\n            if (! (colonIndex \u003E 0 && header.length() \u003E colonIndex + 1)) {\n                break;\n            }\n\n            String headerName = header.substring(0, colonIndex);\n            String headerValue = header.substring(colonIndex + 1);\n\n            requestHeaders.compute(headerName, (key, values) -\u003E {\n                if (values != null) {\n                    values.add(headerValue);\n                } else {\n                    values = new ArrayList\u003C\u003E();\n                }\n                return values;\n            });\n        }\n    }\n\n    builder.setRequestHeaders(requestHeaders);\n    return builder.build();\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_131":{"__typename":"Paragraph","id":"b132595f769a_131","name":"c87c","type":"P","href":null,"layout":null,"metadata":null,"text":"🎉 we’ve now decoded our input stream into a HttpRequest Object.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_132":{"__typename":"Paragraph","id":"b132595f769a_132","name":"f5d9","type":"H4","href":null,"layout":null,"metadata":null,"text":"4. ResponseWriter","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_133":{"__typename":"Paragraph","id":"b132595f769a_133","name":"4628","type":"P","href":null,"layout":null,"metadata":null,"text":"Going back to our HttpHandler we can see both the handleRequest and handleInvalidRequest use the static method writeResponse within the ResponseWriter class.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_134":{"__typename":"Paragraph","id":"b132595f769a_134","name":"c4a0","type":"P","href":null,"layout":null,"metadata":null,"text":"This is used to write the HttpResponse object to the output stream.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_135":{"__typename":"Paragraph","id":"b132595f769a_135","name":"a993","type":"P","href":null,"layout":null,"metadata":null,"text":"In this example we’re simply writing the body as text\u002Fplain but in reality this class could possibly use different implementations for writing the body depending on the type of data being wrote ( JSON \u002F XML etc ).","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":49,"end":59,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_136":{"__typename":"Paragraph","id":"b132595f769a_136","name":"295c","type":"P","href":null,"layout":null,"metadata":null,"text":"Writer steps:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_137":{"__typename":"Paragraph","id":"b132595f769a_137","name":"b358","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Extract status code","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_138":{"__typename":"Paragraph","id":"b132595f769a_138","name":"c922","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Extract status code description","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_139":{"__typename":"Paragraph","id":"b132595f769a_139","name":"b988","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Build header Strings ( E.g. “Content-Length: 50” )","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_140":{"__typename":"Paragraph","id":"b132595f769a_140","name":"04ff","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Write first line ( protocol, status code, status code description )","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_141":{"__typename":"Paragraph","id":"b132595f769a_141","name":"b85a","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Write request headers in following lines","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_142":{"__typename":"Paragraph","id":"b132595f769a_142","name":"cdf0","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Write empty line","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_143":{"__typename":"Paragraph","id":"b132595f769a_143","name":"089d","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Write body ( if present )","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_144":{"__typename":"Paragraph","id":"b132595f769a_144","name":"dff5","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F**\n * Write a HTTPResponse to an outputstream\n * @param outputStream - the outputstream\n * @param response - the HTTPResponse\n *\u002F\n public static void writeResponse(final BufferedWriter outputStream, final HttpResponse response) {\n     try {\n         final int statusCode = response.getStatusCode();\n         final String statusCodeMeaning = HttpStatusCode.STATUS_CODES.get(statusCode);\n         final List\u003CString\u003E responseHeaders = buildHeaderStrings(response.getResponseHeaders());\n \n         outputStream.write(\"HTTP\u002F1.1 \" + statusCode + \" \" + statusCodeMeaning + \"\\r\\n\");\n \n         for (String header : responseHeaders) {\n             outputStream.write(header);\n         }\n \n         final Optional\u003CString\u003E entityString = response.getEntity().flatMap(ResponseWriter::getResponseString);\n         if (entityString.isPresent()) {\n             final String encodedString = new String(entityString.get().getBytes(StandardCharsets.UTF_8), StandardCharsets.UTF_8);\n             outputStream.write(\"Content-Length: \" + encodedString.getBytes().length + \"\\r\\n\");\n             outputStream.write(\"\\r\\n\");\n             outputStream.write(encodedString);\n         } else {\n             outputStream.write(\"\\r\\n\");\n         }\n     } catch (Exception ignored) {\n     }\n }","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_145":{"__typename":"Paragraph","id":"b132595f769a_145","name":"a613","type":"P","href":null,"layout":null,"metadata":null,"text":"Extracting header strings:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_146":{"__typename":"Paragraph","id":"b132595f769a_146","name":"5172","type":"PRE","href":null,"layout":null,"metadata":null,"text":"private static List\u003CString\u003E buildHeaderStrings(final Map\u003CString, List\u003CString\u003E\u003E responseHeaders) {\n    final List\u003CString\u003E responseHeadersList = new ArrayList\u003C\u003E();\n\n    responseHeaders.forEach((name, values) -\u003E {\n        final StringBuilder valuesCombined = new StringBuilder();\n        values.forEach(valuesCombined::append);\n        valuesCombined.append(\";\");\n\n        responseHeadersList.add(name + \": \" + valuesCombined + \"\\r\\n\");\n    });\n\n    return responseHeadersList;\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_147":{"__typename":"Paragraph","id":"b132595f769a_147","name":"d08f","type":"P","href":null,"layout":null,"metadata":null,"text":"Convert response body entity to String:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_148":{"__typename":"Paragraph","id":"b132595f769a_148","name":"9300","type":"PRE","href":null,"layout":null,"metadata":null,"text":"private static Optional\u003CString\u003E getResponseString(final Object entity) {\n    \u002F\u002F Currently only supporting Strings\n    if (entity instanceof String) {\n        try {\n            return Optional.of(entity.toString());\n        } catch (Exception ignored) {\n        }\n    }\n    return Optional.empty();\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_149":{"__typename":"Paragraph","id":"b132595f769a_149","name":"1b8e","type":"P","href":null,"layout":null,"metadata":null,"text":"To finish let’s quickly look at the HttpRequest \u002F HttpResponse Pojos and test our application:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_150":{"__typename":"Paragraph","id":"b132595f769a_150","name":"7d29","type":"P","href":null,"layout":null,"metadata":null,"text":"HttpRequest:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_151":{"__typename":"Paragraph","id":"b132595f769a_151","name":"5178","type":"PRE","href":null,"layout":null,"metadata":null,"text":"package Sockets.pojos;\n\nimport Sockets.contract.HttpMethod;\n\nimport java.net.URI;\nimport java.util.List;\nimport java.util.Map;\n\npublic class HttpRequest {\n  private final HttpMethod httpMethod;\n  private final URI uri;\n  private final Map\u003CString, List\u003CString\u003E\u003E requestHeaders;\n\n  private HttpRequest(HttpMethod opCode,\n                     URI uri,\n                     Map\u003CString, List\u003CString\u003E\u003E requestHeaders) {\n      this.httpMethod = opCode;\n      this.uri = uri;\n      this.requestHeaders = requestHeaders;\n  }\n\n  public URI getUri() {\n      return uri;\n  }\n\n  public HttpMethod getHttpMethod() {\n      return httpMethod;\n  }\n\n  public Map\u003CString, List\u003CString\u003E\u003E getRequestHeaders() {\n      return requestHeaders;\n  }\n\n  public static class Builder {\n      private HttpMethod httpMethod;\n      private URI uri;\n      private Map\u003CString, List\u003CString\u003E\u003E requestHeaders;\n\n     public Builder() {\n     }\n\n     public void setHttpMethod(HttpMethod httpMethod) {\n         this.httpMethod = httpMethod;\n     }\n\n     public void setUri(URI uri) {\n         this.uri = uri;\n     }\n\n     public void setRequestHeaders(Map\u003CString, List\u003CString\u003E\u003E requestHeaders) {\n         this.requestHeaders = requestHeaders;\n     }\n\n     public HttpRequest build() {\n         return new HttpRequest(httpMethod, uri, requestHeaders);\n     }\n  }\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_152":{"__typename":"Paragraph","id":"b132595f769a_152","name":"bd1f","type":"P","href":null,"layout":null,"metadata":null,"text":"HttpResponse:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_153":{"__typename":"Paragraph","id":"b132595f769a_153","name":"4c77","type":"PRE","href":null,"layout":null,"metadata":null,"text":"package Sockets.pojos;\n\nimport java.time.ZoneOffset;\nimport java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Optional;\n\npublic class HttpResponse {\n  private final Map\u003CString, List\u003CString\u003E\u003E responseHeaders;\n  private final int statusCode;\n\n  private final Optional\u003CObject\u003E entity;\n\n  \u002F**\n   * Headers should contain the following:\n   * Date: \u003C date \u003E\n   * Server: \u003C my server \u003E\n   * Content-Type: text\u002Fplain, application\u002Fjson etc...\n   * Content-Length: size of payload\n   *\u002F\n  private HttpResponse(final Map\u003CString, List\u003CString\u003E\u003E responseHeaders, final int statusCode, final Optional\u003CObject\u003E entity) {\n      this.responseHeaders = responseHeaders;\n      this.statusCode = statusCode;\n      this.entity = entity;\n  }\n  public Map\u003CString, List\u003CString\u003E\u003E getResponseHeaders() {\n      return responseHeaders;\n  }\n  public int getStatusCode() {\n      return statusCode;\n  }\n\n  public Optional\u003CObject\u003E getEntity() {\n      return entity;\n  }\n\n  public static class Builder {\n      private final Map\u003CString, List\u003CString\u003E\u003E responseHeaders;\n      private int statusCode;\n\n      private Optional\u003CObject\u003E entity;\n\n      public Builder() {\n          \u002F\u002F Create default headers - server etc\n          responseHeaders = new HashMap\u003C\u003E();\n          responseHeaders.put(\"Server\", List.of(\"MyServer\"));\n          responseHeaders.put(\"Date\", List.of(DateTimeFormatter.RFC_1123_DATE_TIME.format(ZonedDateTime.now(ZoneOffset.UTC))));\n\n          entity = Optional.empty();\n      }\n\n      public Builder setStatusCode(final int statusCode) {\n          this.statusCode = statusCode;\n          return this;\n      }\n\n      public Builder addHeader(final String name, final String value) {\n          responseHeaders.put(name, List.of(value));\n          return this;\n      }\n\n      public Builder setEntity(final Object entity) {\n          if (entity != null) {\n              this.entity = Optional.of(entity);\n          }\n          return this;\n      }\n\n      public HttpResponse build() {\n          return new HttpResponse(responseHeaders, statusCode, entity);\n      }\n  }","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"java"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_154":{"__typename":"Paragraph","id":"b132595f769a_154","name":"dbd1","type":"P","href":null,"layout":null,"metadata":null,"text":"Testing!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_155":{"__typename":"Paragraph","id":"b132595f769a_155","name":"87a0","type":"P","href":null,"layout":null,"metadata":null,"text":"If we boot up our App and generate a HTTP GET Request to the URI \u002FtestOne we should see the following response:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_156":{"__typename":"Paragraph","id":"b132595f769a_156","name":"8e30","type":"PRE","href":null,"layout":null,"metadata":null,"text":"➜  sockets git:(master) ✗ curl http:\u002F\u002F127.0.0.1:8080\u002FtestOne          \n\u003CHTML\u003E \u003CP\u003E Hello There... \u003C\u002FP\u003E \u003C\u002FHTML\u003E% ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"javascript"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_157":{"__typename":"Paragraph","id":"b132595f769a_157","name":"c7d9","type":"P","href":null,"layout":null,"metadata":null,"text":"to a URI not defined:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_158":{"__typename":"Paragraph","id":"b132595f769a_158","name":"abb6","type":"PRE","href":null,"layout":null,"metadata":null,"text":"➜  sockets git:(master) ✗ curl http:\u002F\u002F127.0.0.1:8080\u002FtestTwo\nRoute Not Found...%   ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"javascript"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_159":{"__typename":"Paragraph","id":"b132595f769a_159","name":"8b59","type":"P","href":null,"layout":null,"metadata":null,"text":"and finally an invalid HTTP Request:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_160":{"__typename":"Paragraph","id":"b132595f769a_160","name":"3f9c","type":"PRE","href":null,"layout":null,"metadata":null,"text":"➜  sockets git:(master) ✗ echo hi | nc 127.0.0.1 8080 \nHTTP\u002F1.1 400 BAD_REQUEST\nServer: MyServer;\nDate: Mon, 9 Jan 2023 22:17:20 GMT;\nContent-Length: 18\n\nInvalid Request...% ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"javascript"},"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_161":{"__typename":"Paragraph","id":"b132595f769a_161","name":"d254","type":"P","href":null,"layout":null,"metadata":null,"text":"This has only scratched the surface of building a HTTP server but hopefully as a learning exercise it has been useful to gain a better understanding of some of the possible steps going on behind the scenes.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:b132595f769a_162":{"__typename":"Paragraph","id":"b132595f769a_162","name":"55e1","type":"P","href":null,"layout":null,"metadata":null,"text":"All code referenced can be found here: https:\u002F\u002Fgithub.com\u002Frjlfinn\u002Fjava-http-server","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":39,"end":82,"href":"https:\u002F\u002Fgithub.com\u002Frjlfinn\u002Fjava-http-server","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"UserViewerEdge:userId:b15b69aeb782-viewerId:13fbb74aa197":{"__typename":"UserViewerEdge","id":"userId:b15b69aeb782-viewerId:13fbb74aa197","isMuting":false},"PostViewerEdge:postId:9b6af7f9b3cd-viewerId:13fbb74aa197":{"__typename":"PostViewerEdge","shouldIndexPostForExternalSearch":true,"id":"postId:9b6af7f9b3cd-viewerId:13fbb74aa197"},"Tag:java":{"__typename":"Tag","id":"java","displayTitle":"Java","normalizedTagSlug":"java"},"Tag:https":{"__typename":"Tag","id":"https","displayTitle":"Https","normalizedTagSlug":"https"},"Tag:http-request":{"__typename":"Tag","id":"http-request","displayTitle":"Http Request","normalizedTagSlug":"http-request"},"Tag:http-server":{"__typename":"Tag","id":"http-server","displayTitle":"Http Server","normalizedTagSlug":"http-server"},"Tag:http-response":{"__typename":"Tag","id":"http-response","displayTitle":"Http Response","normalizedTagSlug":"http-response"},"Post:9b6af7f9b3cd":{"__typename":"Post","id":"9b6af7f9b3cd","collection":null,"content({\"postMeteringOptions\":{\"referrer\":\"\"}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"04ee","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"e379","startIndex":14,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"de3b","startIndex":24,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"b745","startIndex":49,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"489b","startIndex":57,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"39a9","startIndex":85,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"0dab","startIndex":105,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"7336","startIndex":132,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"cdc1","startIndex":149,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"9828","startIndex":154,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}],"paragraphs":[{"__ref":"Paragraph:b132595f769a_0"},{"__ref":"Paragraph:b132595f769a_1"},{"__ref":"Paragraph:b132595f769a_2"},{"__ref":"Paragraph:b132595f769a_3"},{"__ref":"Paragraph:b132595f769a_4"},{"__ref":"Paragraph:b132595f769a_5"},{"__ref":"Paragraph:b132595f769a_6"},{"__ref":"Paragraph:b132595f769a_7"},{"__ref":"Paragraph:b132595f769a_8"},{"__ref":"Paragraph:b132595f769a_9"},{"__ref":"Paragraph:b132595f769a_10"},{"__ref":"Paragraph:b132595f769a_11"},{"__ref":"Paragraph:b132595f769a_12"},{"__ref":"Paragraph:b132595f769a_13"},{"__ref":"Paragraph:b132595f769a_14"},{"__ref":"Paragraph:b132595f769a_15"},{"__ref":"Paragraph:b132595f769a_16"},{"__ref":"Paragraph:b132595f769a_17"},{"__ref":"Paragraph:b132595f769a_18"},{"__ref":"Paragraph:b132595f769a_19"},{"__ref":"Paragraph:b132595f769a_20"},{"__ref":"Paragraph:b132595f769a_21"},{"__ref":"Paragraph:b132595f769a_22"},{"__ref":"Paragraph:b132595f769a_23"},{"__ref":"Paragraph:b132595f769a_24"},{"__ref":"Paragraph:b132595f769a_25"},{"__ref":"Paragraph:b132595f769a_26"},{"__ref":"Paragraph:b132595f769a_27"},{"__ref":"Paragraph:b132595f769a_28"},{"__ref":"Paragraph:b132595f769a_29"},{"__ref":"Paragraph:b132595f769a_30"},{"__ref":"Paragraph:b132595f769a_31"},{"__ref":"Paragraph:b132595f769a_32"},{"__ref":"Paragraph:b132595f769a_33"},{"__ref":"Paragraph:b132595f769a_34"},{"__ref":"Paragraph:b132595f769a_35"},{"__ref":"Paragraph:b132595f769a_36"},{"__ref":"Paragraph:b132595f769a_37"},{"__ref":"Paragraph:b132595f769a_38"},{"__ref":"Paragraph:b132595f769a_39"},{"__ref":"Paragraph:b132595f769a_40"},{"__ref":"Paragraph:b132595f769a_41"},{"__ref":"Paragraph:b132595f769a_42"},{"__ref":"Paragraph:b132595f769a_43"},{"__ref":"Paragraph:b132595f769a_44"},{"__ref":"Paragraph:b132595f769a_45"},{"__ref":"Paragraph:b132595f769a_46"},{"__ref":"Paragraph:b132595f769a_47"},{"__ref":"Paragraph:b132595f769a_48"},{"__ref":"Paragraph:b132595f769a_49"},{"__ref":"Paragraph:b132595f769a_50"},{"__ref":"Paragraph:b132595f769a_51"},{"__ref":"Paragraph:b132595f769a_52"},{"__ref":"Paragraph:b132595f769a_53"},{"__ref":"Paragraph:b132595f769a_54"},{"__ref":"Paragraph:b132595f769a_55"},{"__ref":"Paragraph:b132595f769a_56"},{"__ref":"Paragraph:b132595f769a_57"},{"__ref":"Paragraph:b132595f769a_58"},{"__ref":"Paragraph:b132595f769a_59"},{"__ref":"Paragraph:b132595f769a_60"},{"__ref":"Paragraph:b132595f769a_61"},{"__ref":"Paragraph:b132595f769a_62"},{"__ref":"Paragraph:b132595f769a_63"},{"__ref":"Paragraph:b132595f769a_64"},{"__ref":"Paragraph:b132595f769a_65"},{"__ref":"Paragraph:b132595f769a_66"},{"__ref":"Paragraph:b132595f769a_67"},{"__ref":"Paragraph:b132595f769a_68"},{"__ref":"Paragraph:b132595f769a_69"},{"__ref":"Paragraph:b132595f769a_70"},{"__ref":"Paragraph:b132595f769a_71"},{"__ref":"Paragraph:b132595f769a_72"},{"__ref":"Paragraph:b132595f769a_73"},{"__ref":"Paragraph:b132595f769a_74"},{"__ref":"Paragraph:b132595f769a_75"},{"__ref":"Paragraph:b132595f769a_76"},{"__ref":"Paragraph:b132595f769a_77"},{"__ref":"Paragraph:b132595f769a_78"},{"__ref":"Paragraph:b132595f769a_79"},{"__ref":"Paragraph:b132595f769a_80"},{"__ref":"Paragraph:b132595f769a_81"},{"__ref":"Paragraph:b132595f769a_82"},{"__ref":"Paragraph:b132595f769a_83"},{"__ref":"Paragraph:b132595f769a_84"},{"__ref":"Paragraph:b132595f769a_85"},{"__ref":"Paragraph:b132595f769a_86"},{"__ref":"Paragraph:b132595f769a_87"},{"__ref":"Paragraph:b132595f769a_88"},{"__ref":"Paragraph:b132595f769a_89"},{"__ref":"Paragraph:b132595f769a_90"},{"__ref":"Paragraph:b132595f769a_91"},{"__ref":"Paragraph:b132595f769a_92"},{"__ref":"Paragraph:b132595f769a_93"},{"__ref":"Paragraph:b132595f769a_94"},{"__ref":"Paragraph:b132595f769a_95"},{"__ref":"Paragraph:b132595f769a_96"},{"__ref":"Paragraph:b132595f769a_97"},{"__ref":"Paragraph:b132595f769a_98"},{"__ref":"Paragraph:b132595f769a_99"},{"__ref":"Paragraph:b132595f769a_100"},{"__ref":"Paragraph:b132595f769a_101"},{"__ref":"Paragraph:b132595f769a_102"},{"__ref":"Paragraph:b132595f769a_103"},{"__ref":"Paragraph:b132595f769a_104"},{"__ref":"Paragraph:b132595f769a_105"},{"__ref":"Paragraph:b132595f769a_106"},{"__ref":"Paragraph:b132595f769a_107"},{"__ref":"Paragraph:b132595f769a_108"},{"__ref":"Paragraph:b132595f769a_109"},{"__ref":"Paragraph:b132595f769a_110"},{"__ref":"Paragraph:b132595f769a_111"},{"__ref":"Paragraph:b132595f769a_112"},{"__ref":"Paragraph:b132595f769a_113"},{"__ref":"Paragraph:b132595f769a_114"},{"__ref":"Paragraph:b132595f769a_115"},{"__ref":"Paragraph:b132595f769a_116"},{"__ref":"Paragraph:b132595f769a_117"},{"__ref":"Paragraph:b132595f769a_118"},{"__ref":"Paragraph:b132595f769a_119"},{"__ref":"Paragraph:b132595f769a_120"},{"__ref":"Paragraph:b132595f769a_121"},{"__ref":"Paragraph:b132595f769a_122"},{"__ref":"Paragraph:b132595f769a_123"},{"__ref":"Paragraph:b132595f769a_124"},{"__ref":"Paragraph:b132595f769a_125"},{"__ref":"Paragraph:b132595f769a_126"},{"__ref":"Paragraph:b132595f769a_127"},{"__ref":"Paragraph:b132595f769a_128"},{"__ref":"Paragraph:b132595f769a_129"},{"__ref":"Paragraph:b132595f769a_130"},{"__ref":"Paragraph:b132595f769a_131"},{"__ref":"Paragraph:b132595f769a_132"},{"__ref":"Paragraph:b132595f769a_133"},{"__ref":"Paragraph:b132595f769a_134"},{"__ref":"Paragraph:b132595f769a_135"},{"__ref":"Paragraph:b132595f769a_136"},{"__ref":"Paragraph:b132595f769a_137"},{"__ref":"Paragraph:b132595f769a_138"},{"__ref":"Paragraph:b132595f769a_139"},{"__ref":"Paragraph:b132595f769a_140"},{"__ref":"Paragraph:b132595f769a_141"},{"__ref":"Paragraph:b132595f769a_142"},{"__ref":"Paragraph:b132595f769a_143"},{"__ref":"Paragraph:b132595f769a_144"},{"__ref":"Paragraph:b132595f769a_145"},{"__ref":"Paragraph:b132595f769a_146"},{"__ref":"Paragraph:b132595f769a_147"},{"__ref":"Paragraph:b132595f769a_148"},{"__ref":"Paragraph:b132595f769a_149"},{"__ref":"Paragraph:b132595f769a_150"},{"__ref":"Paragraph:b132595f769a_151"},{"__ref":"Paragraph:b132595f769a_152"},{"__ref":"Paragraph:b132595f769a_153"},{"__ref":"Paragraph:b132595f769a_154"},{"__ref":"Paragraph:b132595f769a_155"},{"__ref":"Paragraph:b132595f769a_156"},{"__ref":"Paragraph:b132595f769a_157"},{"__ref":"Paragraph:b132595f769a_158"},{"__ref":"Paragraph:b132595f769a_159"},{"__ref":"Paragraph:b132595f769a_160"},{"__ref":"Paragraph:b132595f769a_161"},{"__ref":"Paragraph:b132595f769a_162"}]},"validatedShareKey":"","shareKeyCreator":null},"creator":{"__ref":"User:b15b69aeb782"},"inResponseToEntityType":null,"isLocked":false,"isMarkedPaywallOnly":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","mediumUrl":"https:\u002F\u002Frjlfinn.medium.com\u002Fcreating-a-http-server-in-java-9b6af7f9b3cd","primaryTopic":{"__ref":"Topic:decb52b64abf"},"topics":[{"__typename":"Topic","slug":"programming"}],"isLimitedState":false,"isPublished":true,"allowResponses":true,"latestPublishedVersion":"b132595f769a","visibility":"PUBLIC","postResponses":{"__typename":"PostResponses","count":3},"responseDistribution":"NOT_DISTRIBUTED","clapCount":43,"title":"Creating a HTTP Server in Java","isSeries":false,"sequence":null,"uniqueSlug":"creating-a-http-server-in-java-9b6af7f9b3cd","socialTitle":"","socialDek":"","canonicalUrl":"","metaDescription":"","latestPublishedAt":1716139033756,"readingTime":10.673584905660377,"previewContent":{"__typename":"PreviewContent","subtitle":"Java has a massive ecosystem of HTTP servers and frameworks which sit on top."},"previewImage":{"__ref":"ImageMetadata:1*kkD3XGh8Tdb71HC_HqlxOA.jpeg"},"isShortform":false,"seoTitle":"","firstPublishedAt":1673806243783,"updatedAt":1716139033756,"shortformType":"SHORTFORM_TYPE_LINK","seoDescription":"","viewerEdge":{"__ref":"PostViewerEdge:postId:9b6af7f9b3cd-viewerId:13fbb74aa197"},"isSuspended":false,"license":"ALL_RIGHTS_RESERVED","tags":[{"__ref":"Tag:java"},{"__ref":"Tag:https"},{"__ref":"Tag:http-request"},{"__ref":"Tag:http-server"},{"__ref":"Tag:http-response"}],"isFeaturedInPublishedPublication":false,"isNewsletter":false,"statusForCollection":null,"pendingCollection":null,"detectedLanguage":"en","wordCount":2643,"layerCake":3,"responsesLocked":false}}</script><script src="https://cdn-client.medium.com/lite/static/js/manifest.d9ae8f9e.js"></script><script src="https://cdn-client.medium.com/lite/static/js/9865.1496d74a.js"></script><script src="https://cdn-client.medium.com/lite/static/js/main.ef9ff7cc.js"></script><script src="https://cdn-client.medium.com/lite/static/js/instrumentation.5bef8967.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/reporting.ff22a7a5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5049.d1ead72d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4505.6dfaf853.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6618.db187378.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9380.fb176dee.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2707.a4e221ac.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9977.933c1c9a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8599.73cb8339.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5250.56de1aec.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8346.be5bef41.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2648.26563adf.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8393.a4ecfb83.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4863.c099525e.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6199.14033852.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5642.ae5b5ec1.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6546.3ed2f91d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6834.8aa8d357.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4492.0c3e1a1d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2571.6814b962.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/839.1c286b32.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6128.f8800a13.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2135.81a3fcd0.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7975.60bcefe8.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/144.9891f241.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5240.6281357f.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8819.c627c2bf.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8204.1d481d44.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostPage.MainContent.995294cd.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8414.0d800846.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3974.8d3e0217.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2527.dc9e96c4.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostResponsesContent.e1e580cb.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/responses.editor.e89462cb.chunk.js"></script><script>window.main();</script></body></html>